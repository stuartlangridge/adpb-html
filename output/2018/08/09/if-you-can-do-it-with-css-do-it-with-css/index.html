<!DOCTYPE html>
<html lang="en">
<head>
		<title>as days pass by &mdash; If you can do it with CSS do it with CSS</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre|Enriqueta:400,700" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="//www.kryogenix.org/days/theme/css/style.css" />
		<link rel="stylesheet" type="text/css" href="//www.kryogenix.org/days/theme/css/simple-footnotes.css" />
		<link rel="icon" type="image/png" href="/favicon.png" />
		<style type="text/css">
			body.custom-background {
				background: url(//www.kryogenix.org/days/theme/handmadepaper.png); /* thank you subtlepatterns! */
			}
		</style>
		<link rel="alternate" type="application/rss+xml"
			title="as days pass by"
			href="//www.kryogenix.org/days/feed" /> 
		<!--[if lte IE 8]><script src="//www.kryogenix.org/days/theme/js/html5shiv.js"></script><![endif]-->
		<link rel="webmention" href="https://webmention.herokuapp.com/api/webmention" />
		<link rel="feed" href="http://www.kryogenix.org/days/archives/"> 
		<script src="https://cdn.ravenjs.com/3.4.1/raven.min.js"></script>
		<script>Raven.config('https://fc8cd4c9637043f3b385d9daa8dbe367@app.getsentry.com/91852').install()</script>
</head>

<body class="home blog custom-background single-author" >
	<div id="container">
		<div id="header">
				<p>A blog by <a href="//www.kryogenix.org/">Stuart Langridge</a></p>
				<h1 id="site-title"><a href="//www.kryogenix.org/days">as days pass by</a></h1>
<h2 id="site-description">scratched tallies on the prison wall</h2>		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Kryogenix Consulting</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/days/archives">All posts, ever</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/code">Code</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
		</div>
	
		<div id="contents">

<div class="post type-post status-publish format-standard hentry category-general h-entry" id="post">
	<div class="entry-meta">
		<div class="date"><a href="//www.kryogenix.org/days/2018/08/09/if-you-can-do-it-with-css-do-it-with-css/"><time 
			class="dt-published" datetime="2018-08-09T00:19:00+01:00">Aug 09 2018</time></a>
			<span class="byline h-card">By <a class="p-author" href="//www.kryogenix.org/days/"><img src="https://kryogenix.org/images/hackergotchi-simpler.png" class="u-photo" alt=""> <span class="p-name">sil</span></a></span>
		</div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a class="u-url p-name" href="//www.kryogenix.org/days/2018/08/09/if-you-can-do-it-with-css-do-it-with-css/" title="Permalink to If you can do it with CSS do it with CSS" rel="bookmark">If you can do it with <span class="caps">CSS</span> do it with <span class="caps">CSS</span></a>
		</h2>
		<div class="entry-content e-content">
			<p>I read Twitter with Tweetdeck. And I use the excellent <a href="https://better.tw/">Better Tweetdeck</a> to improve my Tweetdeck experience. And I had an&nbsp;idea.</p>
<p>You see, emoji, much as they&#8217;re the way we communicate now, they&#8217;re actually quite hard to read. And Slack does this rather neat thing where if you respond to a message with an emoji, it displays that emoji bigger than normal text so you can see it clearly. And some people just write tweets which are, like, two emoji and that&#8217;s it, and it would be really handy if they were large enough to&nbsp;read.</p>
<p><img src="https://kryogenix.org/images/tweet-emoji-only.png" alt=""></p>
<p>So I thought, here&#8217;s an idea; how about, if there&#8217;s a tweet which is just emoji, then display those emoji larger so they&#8217;re easier to see? Only if there are, say, four or less; you don&#8217;t want those people who write a whole huge tweet as emoji to get enlarged. Just the ones where someone responds with two little pictures and that&#8217;s it; let&#8217;s make that nice and visible, like Slack&nbsp;does.</p>
<p>This is clearly a thing for Better Tweetdeck to do. (They already provide a config option to make emoji a little bigger, which I appreciate.) So&#8230; how do we do&nbsp;this?</p>
<p>Well, one obvious way is to do it with JavaScript. Every time we read a new tweet, look to see whether it contains nothing but emoji, and if it does and there are less than four of them, add inline styles to make them larger. Job&nbsp;done.</p>
<p>But&#8230; that&#8217;s not very efficient, is it? You have to do that every time a new tweet appears, in any column, and that happens a lot. What would actually be better is to write some <span class="caps">CSS</span> which does this, and add that <span class="caps">CSS</span> one time, when you load up, and then you&#8217;re done. Have the browser do the heavy lifting, not us. It is a principle with me that if you <em>can</em> do a thing with <span class="caps">CSS</span>, then you <em>should</em> do it with <span class="caps">CSS</span>. JavaScript is there for things that <span class="caps">CSS</span> <em>can&#8217;t</em> do. Don&#8217;t use JavaScript, which makes you do the work, when you can use <span class="caps">CSS</span> and make the browser do it instead. The browser is better than you at&nbsp;it.</p>
<p>So&#8230; what you want to do is this. In pure <span class="caps">CSS</span>, if there&#8217;s a tweet (which in Tweetdeck is a <code>&lt;p&gt;</code> element) which contains <code>&lt;img class="emoji"&gt;</code> <em>and nothing else</em>, and there are four or fewer of these <code>img.emoji</code> elements, then make those images&nbsp;larger.</p>
<p>In pure <span class="caps">CSS</span>. No JavaScript. This is harder than it looks. Go and try to work it out, if you don&#8217;t believe&nbsp;me.</p>
<p>Well, the key insight here is that if you are an element, and you are <code>:last-child(X)</code>, and you are <em>also</em> <code>last-of-type(X)</code>, then there can&#8217;t be any elements after you which are not the same as you. So, if an <code>img.emoji</code> is the first of its type, and also the first element, and it&#8217;s the third last of its type, and also the third last element, then we know that it is element 1 of three identical elements. So an <code>img:nth-child(1)</code> which is also an <code>img:nth-of-type(1)</code> and which is also an <code>img:nth-last-of-type(3)</code> and also an <code>img:nth-last-child(3)</code> <em>must be</em> the first <code>&lt;img&gt;</code> in a group of three <code>&lt;img&gt;</code> elements. So that solves our problem! All we need is a selector which matches an img which&nbsp;is:</p>
<ul>
    <li>img 1 in a group of 1 image,&nbsp;or</li>
    <li>img 1 in a group of 2 images,&nbsp;or</li>
    <li>img 2 in a group of 2 images,&nbsp;or</li>
    <li>img 1 in a group of 3 images,&nbsp;or</li>
    <li>img 2 in a group of 3 images,&nbsp;or</li>
    <li>img 3 in a group of 3 images,&nbsp;or</li>
    <li>img 1 in a group of 4 images,&nbsp;or</li>
    <li>&#8230;etc</li>
</ul>

<p>&#8230;and that&#8217;s pretty easy, although long, to express as a <span class="caps">CSS</span> selector. So, to resize all <code>img.emoji</code> elements where (a) there are <em>only</em> <code>img.emoji</code> elements in this tweet and no text, <em>and</em> (b) there are four or fewer <code>img.emoji</code> in the tweet, we need a selector like&nbsp;this:</p>
<pre><code>p > .emoji:nth-child(1):nth-of-type(1):nth-last-child(1):nth-last-of-type(1), /* 1 of 1 */
p > .emoji:nth-child(1):nth-of-type(1):nth-last-child(2):nth-last-of-type(2), /* 1 of 2 */
p > .emoji:nth-child(2):nth-of-type(2):nth-last-child(1):nth-last-of-type(1), /* 2 of 2 */
p > .emoji:nth-child(1):nth-of-type(1):nth-last-child(3):nth-last-of-type(3), /* 1 of 3 */
p > .emoji:nth-child(2):nth-of-type(2):nth-last-child(2):nth-last-of-type(2), /* 2 of 3 */
p > .emoji:nth-child(3):nth-of-type(3):nth-last-child(1):nth-last-of-type(1), /* 3 of 3 */
p > .emoji:nth-child(1):nth-of-type(1):nth-last-child(4):nth-last-of-type(4), /* 1 of 4 */
p > .emoji:nth-child(2):nth-of-type(2):nth-last-child(3):nth-last-of-type(3), /* 2 of 4 */
p > .emoji:nth-child(3):nth-of-type(3):nth-last-child(2):nth-last-of-type(2), /* 3 of 4 */
p > .emoji:nth-child(4):nth-of-type(4):nth-last-child(1):nth-last-of-type(1) {/* 4 of 4 */
    styles here
}</code></pre>

<p>It looks long and cryptic and mystic, but actually it&#8217;s not that complicated at all. And, importantly, this is all the work you have to do. Add that <span class="caps">CSS</span>, and then any new tweets that come along which match our criteria get <em>automatically</em> styled to match. You don&#8217;t have to inspect every tweet and tweak it. The browser does the work, which is what the browser is designed for. If you <em>can</em> do a thing with <span class="caps">CSS</span>, then <em>do</em> it with <span class="caps">CSS</span>. Job&nbsp;done. </p>
<p>I&#8217;m quite proud of this. There&#8217;s an increasing, and depressing, movement to add more JavaScript to web pages, to write more code client side, to deal with huge <span class="caps">JS</span> downloads by improving compression rather than by just <em>doing less JavaScript</em>. I, myself, I&#8217;m in favour of having <span class="caps">CSS</span> do the things it can do, even if you have to be creative to solve that problem. Falling back to JavaScript to do styling is a failure. Use <span class="caps">CSS</span> where you can; being clever in how you do that <span class="caps">CSS</span> is part of the fun. You don&#8217;t need <span class="caps">JS</span> for this, really you don&#8217;t. <span class="caps">CSS</span> actually <em>is</em>&nbsp;awesome.</p>
<p><a href="https://github.com/eramdam/BetterTweetDeck/pull/369">My pull request at Better Tweetdeck</a> is, at time of writing, still pending. Proof that this technique works <a href="http://jsbin.com/yosasol/edit?html,css,output">is in jsbin</a>. Fingers crossed my <span class="caps">PR</span> gets accepted, and we can solve another problem with pure <span class="caps">CSS</span>.</p>
<p>Purity is great. And if you&#8217;re thinking, <span class="caps">CSS</span> can&#8217;t solve real problems&#8230; check out <a href="https://twitter.com/finnhvman/status/1020243884079763456">Bence Szabó</a>&#8216;s <em>amazing</em> <a href="https://codepen.io/finnhvman/full/xJRMJp/">pure <span class="caps">CSS</span> stacking game</a>. I was open mouthed with awe. If you aren&#8217;t, maybe you should spend some time going back over how the web works, and then you will be&nbsp;too.</p>
		</div> <!--/#entry-content-->
		<ul class="neighbours-links">
		<li><a href="//www.kryogenix.org/days/2018/07/23/inside-out/">Previous post</a></li>
		</ul>
	</div> <!--/#main-->
</div>  <!--/#post-->
<div id="webmentions">
<h4>More in the discussion (powered by <a href="http://indiewebcamp.com/Webmention">webmentions</a>)</h4>
	<ul><li>(no mentions, yet.)</li></ul>
<form id="wmform" method="POST" action="https://webmention.herokuapp.com/api/webmention">
	<label>Did you link to this post? Enter your page's URL:
	<input type="url" name="source"></label>
	<input type="hidden" name="target" value="http://www.kryogenix.org/days/2018/08/09/if-you-can-do-it-with-css-do-it-with-css/">
	<input type="submit" value="Add link">
</form>
<script src="//www.kryogenix.org/days/theme/live-webmentions-cors.js"></script>
</div>

<p id="oldcomments"></p>
<script>
var aurl = '2018/08/09/if-you-can-do-it-with-css-do-it-with-css/';
var parts = aurl.split('/');
if (parts[parts.length-1] === "") { parts = parts.slice(0, parts.length-1); }
var tooNewForOldComments = false;
if (parts[0].match(/^[0-9]+$/)) {
	var asnum = parseInt(parts[0], 10);
	if (!isNaN(asnum) && asnum > 2014) {
		tooNewForOldComments = true;
	}
}
if (!tooNewForOldComments) {
	var comurl = "/oldcomments/" + parts.join("-") + ".html";
	var x = new XMLHttpRequest();
	x.open("HEAD", comurl, true);
	x.onreadystatechange = function() {
		if (x.readyState == 4) {
			if (x.status == 200) {
				document.getElementById("oldcomments").innerHTML = '<a href="' + comurl + '">See pre-2014 comments on this post</a>';
			}
		}
	};
	x.send();
}
</script>

		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://pelican.readthedocs.org">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
				<script type="text/javascript">
					var _gaq = _gaq || [];
					_gaq.push(['_setAccount', 'UA-331575-1']);
					_gaq.push(['_trackPageview']);
					(function() {
						var ga = document.createElement('script'); 
						ga.type = 'text/javascript'; ga.async = true;
						ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
						var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
					})();
				</script>
		</div><!-- /#footer -->
	</div><!-- /#container -->




<div id="loadtimer"></div>
<script>
window.onload = function(){
    setTimeout(function(){
      window.performance = window.performance || 
window.mozPerformance || window.msPerformance || 
window.webkitPerformance || {};
      var t = performance.timing || {};
      if (!t) {
        
        return;
      }
      var start = t.navigationStart,
          end = t.loadEventEnd
          loadTime = (end - start) / 1000;
      var copy = document.getElementById('loadtimer');
      copy.innerHTML += "This page loaded in " + loadTime + " seconds.";
    }, 0); 
}

</script>
</body> </html>