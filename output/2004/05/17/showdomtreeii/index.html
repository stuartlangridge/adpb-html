<!DOCTYPE html>
<html lang="en">
<head>
		<title>as days pass by &mdash; Show DOM Tree II bookmarklet</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link href="https://fonts.googleapis.com/css?family=Covered+By+Your+Grace|Maitree" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="//www.kryogenix.org/days/theme/css/style.css" />
		<link rel="stylesheet" type="text/css" href="//www.kryogenix.org/days/theme/css/simple-footnotes.css" />
		<link rel="icon" type="image/png" href="/favicon.png" />
		<style type="text/css">
			body.custom-background {
				background: url(//www.kryogenix.org/days/theme/handmadepaper.png); /* thank you subtlepatterns! */
			}
		</style>
		<link rel="alternate" type="application/rss+xml"
			title="as days pass by"
			href="//www.kryogenix.org/days/feed" /> 
		<!--[if lte IE 8]><script src="//www.kryogenix.org/days/theme/js/html5shiv.js"></script><![endif]-->
		<link rel="webmention" href="https://webmention.herokuapp.com/api/webmention" />
		<link rel="feed" href="http://www.kryogenix.org/days/archives/"> 
		<script src="https://cdn.ravenjs.com/3.4.1/raven.min.js"></script>
		<script>Raven.config('https://fc8cd4c9637043f3b385d9daa8dbe367@app.getsentry.com/91852').install()</script>
</head>

<body class="home blog custom-background single-author" >
	<div id="container">
		<div id="header">
				<p>A blog by <a href="//www.kryogenix.org/">Stuart Langridge</a></p>
				<h1 id="site-title"><a href="//www.kryogenix.org/days">as days pass by</a></h1>
<h2 id="site-description">scratched tallies on the prison wall</h2>		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Kryogenix Consulting</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/days/archives">All posts, ever</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/code">Code</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
		</div>
	
		<div id="contents">

<div class="post type-post status-publish format-standard hentry category-general h-entry" id="post">
	<div class="entry-meta">
		<div class="date"><a href="//www.kryogenix.org/days/2004/05/17/showdomtreeii/"><time 
			class="dt-published" datetime="2004-05-17T11:00:00">May 17 2004</time></a>
			<span class="byline h-card">By <a class="p-author" href="//www.kryogenix.org/days/"><img src="https://kryogenix.org/images/hackergotchi-simpler.png" class="u-photo" alt=""> <span class="p-name">sil</span></a></span>
		</div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a class="u-url p-name" href="//www.kryogenix.org/days/2004/05/17/showdomtreeii/" title="Permalink to Show DOM Tree II bookmarklet" rel="bookmark">Show <span class="caps">DOM</span> Tree <span class="caps">II</span>&nbsp;bookmarklet</a>
		</h2>
		<div class="entry-content e-content">
			<p>Well, Steve over at slayeroffice has updated his <a href="http://slayeroffice.com/index.php?c=/scripts/comment_scripts/comments2.php&amp;id=112">Document Tree
Chart</a>, after both he and <a href="http://www.kryogenix.org/days/2004/05/09/bookmarkletShow">I</a> put together a solution to Molly
Holtzshlag&#8217;s <a href="http://slayeroffice.com/index.php?c=/scripts/comment_scripts/comments2.php&amp;id=109">thoughts on producing a <span class="caps">DOM</span> tree from an active
document</a>. We&#8217;ve gone beyond that stage now, though, I think; Steve&#8217;s
<a href="http://slayeroffice.com/index.php?c=/scripts/comment_scripts/comments2.php&amp;id=112">latest iteration</a> has many cool extra features,
like highlighting, colour coding, and transparency (since, unlike mine,
he creates it in the window containing the document you&#8217;re&nbsp;examining).</p>
<p>And then he finishes up by throwing down the gauntlet to me to leapfrog
him again, which is very unfair indeed given that I have to be at work
in, like, six&nbsp;hours.</p>
<p><a href="javascript:(function(){var%20root=document.getElementsByTagName('html')[0];var%20mydomtree=processdomnode(root);var%20newwin=window.open();newwin.document.write('&lt;html&gt;&lt;head&gt;&lt;br%20/&gt;%0A&lt;style%20type='text/css'&gt;%20body%20{%20width:%202000%;%20color:%20black;%20background-color:%20white;%20}');newwin.document.write('div.longcn%20{%20display:%20none;%20}');newwin.document.write('div%20{%20border:%201px%20solid%20yellow;%20%20padding-left:%200em;%20%20position:%20relative;%20%20min-height:%201em;%20%20margin-left:%204em;%20%20border-left:%201px%20solid%20black;%20%20}');newwin.document.write('span%20{%20%20position:%20absolute;%20%20left:%20-4em;%20%20top:%2050%;%20%20margin-top:%20-0.5em;%20width:%204em;%20%20max-width:%204em;%20%20overflow:%20hidden;%20%20text-align:%20right;%20%20padding-right:%200.2em;%20%20font-size:%200.8em;%20}');newwin.document.write('span.content%20{%20%20left:%20-4em;%20%20color:%20red;%20%20background-color:%20white;%20width:%2080em;%20%20max-width:%2080em;%20%20%20overflow:%20hidden;%20%20text-align:%20left;%20%20height:%201.3em;%20%20max-height:%201.3em;%20%20margin-top:%20-0.7em;%20}');newwin.document.write('div%20a%20{%20position:%20absolute;%20top:%2050%;%20margin-top:%20-0.5em;%20}');newwin.document.write('&lt;/style&gt;%0A&lt;p&gt;&lt;scr'+'ipt%20type='text/javascript'&gt;');newwin.document.write('function%20hideTextNodes(e)%20{');newwin.document.write('if%20(!document.styleSheets)%20return;%20%20var%20x%20=%20document.styleSheets[0];%20%20if%20(!x)%20return;');newwin.document.write('if%20(x.addRule)%20x.addRule('div.content','display:%20none%20!important');');newwin.document.write('if%20(x.insertRule)%20x.insertRule('div.content%20{display:%20none%20!important%20}',%20x.cssRules.length);');newwin.document.write('if%20(window.event)%20{%20window.event.returnValue%20=%20false;%20window.event.cancelBubble%20=%20true;%20}');newwin.document.write('if%20(e)%20{%20e.preventDefault();%20e.stopPropagation();%20}%20}');newwin.document.write('&lt;/scr'+'ipt&gt;&lt;/head&gt;&lt;body&gt;&lt;br%20/&gt;%0A&lt;h1&gt;DOM%20tree&lt;/h1&gt;%0A&lt;p&gt;');newwin.document.write('%0A&lt;p&gt;&lt;a%20href='#'%20onclick='hideTextNodes();%20return%20false;'&gt;Hide%20text%20nodes&lt;/a&gt;&lt;/p&gt;%0A&lt;p&gt;');newwin.document.write('&lt;/body&gt;&lt;/html&gt;');newwin.document.body.appendChild(mydomtree);function%20processdomnode(n){if((n.nodeType==3)&amp;&amp;(n.nodeValue.replace(/[%20nrt]/g,'').length==0))return;var%20mynode=document.createElement('div');var%20mytitle=document.createElement('span');if(n.nodeType==3){mytitle.setAttribute('title',n.nodeValue);mytitle.appendChild(document.createTextNode(n.nodeValue.replace(/^[%20ntr]*/g,'')));mytitle.className='content';mynode.className='content';}else{mytitle.appendChild(document.createTextNode(n.nodeName));}mynode.appendChild(mytitle);mytitle.referenceNode=n;addEvent(mytitle,'mouseover',hover);addEvent(mytitle,'mouseout',unhover);for(var%20i=0;i&lt;n.childNodes.length;i++){var%20apch=processdomnode(n.childNodes[i]);if(apch){if((n.childNodes.length&gt;4)&amp;&amp;(n.nodeName.toLowerCase()!='body'))apch.className='longcn';mynode.appendChild(apch);}}if((n.childNodes.length&gt;4)&amp;&amp;(n.nodeName.toLowerCase()!='body')){var%20expander=document.createElement('a');addEvent(expander,'click',dntoggle);expander.href='#';expander.appendChild(document.createTextNode('+'));expander.className='expander';mynode.appendChild(expander);}return%20mynode;}function%20addEvent(obj,evType,fn,useCapture){if(obj.addEventListener){obj.addEventListener(evType,fn,useCapture);return%20true;}else%20if(obj.attachEvent){var%20r=obj.attachEvent('on'+evType,fn);return%20r;}}function%20dntoggle(e){if(window.event)t=window.event.srcElement;if(e&amp;&amp;e.target)t=e.target;if(!t)return;ta=climbDomTree(t,'a');t=climbDomTree(t,'div');if(!t)return;minus='--';for(var%20i=0;i&lt;t.childNodes.length;i++){if(('%20'+t.childNodes[i].className+'%20').indexOf('%20longcn%20')!=-1){t.childNodes[i].className=t.childNodes[i].className.replace('longcn','');minus='+';}else{t.childNodes[i].className+='%20longcn';minus='--';}}ta.firstChild.nodeValue=minus;if(window.event){window.event.returnValue=false;window.event.cancelBubble=true;}if(e){e.preventDefault();e.stopPropagation();}}function%20hover(e){if(window.event)t=window.event.srcElement;if(e&amp;&amp;e.target)t=e.target;if(!t)return;t=climbDomTree(t,'span');if(!t)return;if(t.referenceNode&amp;&amp;t.referenceNode.style)t.referenceNode.style.backgroundColor='#ccc';if(t.referenceNode.scrollIntoView)t.referenceNode.scrollIntoView();t=climbDomTree(t,'div');t.style.backgroundColor='#ccc';}function%20unhover(e){if(window.event)t=window.event.srcElement;if(e&amp;&amp;e.target)t=e.target;if(!t)return;t=climbDomTree(t,'span');if(!t)return;if(t.referenceNode&amp;&amp;t.referenceNode.style)t.referenceNode.style.backgroundColor='';t=climbDomTree(t,'div');t.style.backgroundColor='transparent';}function%20climbDomTree(node,dest){while((node.nodeName.toLowerCase()!=dest.toLowerCase())&amp;&amp;(node.nodeName.toLowerCase()!='html')){node=node.parentNode;}if(node.nodeName.toLowerCase()!='html')return%20node;}})()">Show <span class="caps">DOM</span> Tree <span class="caps">II</span></a></p>
<p>New&nbsp;features:</p>
<dl>
<dt>A better&nbsp;layout</dt>
<dd>My major problem with my last attempt was that the layout, while
correct (ish) was difficult to comprehend because a full <span class="caps">DOM</span> tree
for a given <span class="caps">HTML</span> page is considerably wider than the browser. To
counter this, I&#8217;ve flipped the layout through 90 degrees. (You&#8217;ll
see what I mean when you see&nbsp;it.)</dd>
<dt>Element&nbsp;highlighting</dt>
<dd>Stolen shamelessly from Steve, when you mouse over an element in the
tree, that element is highlighted in grey in both the tree and the
source&nbsp;document.</dd>
<dt>Element&nbsp;visibility</dt>
<dd>When you mouse over an element, it also scrolls the source document
so that that element is&nbsp;visible.</dd>
<dt>Expand/collapse</dt>
<dd>Since the tree is massive on any reasonably sized document, it
starts out collapsed. You can expand and collapse branches of the
tree to concentrate just on the area you care&nbsp;about.</dd>
<dt>Fully visible text&nbsp;nodes</dt>
<dd>One advantage with the 90 degree flip of the node list is that we
can now display the full text of any text node, and indeed we do&nbsp;so.</dd>
</dl>
<p>It probably only works in Mozilla. If it works in anything else consider
it a bonus. Let me know if there are bugs, but, unlike Steve, I do not
promise at all to fix&nbsp;them&#8230;</p>
<p>Steve: bring it on.&nbsp;;-)</p>
		</div> <!--/#entry-content-->
		<ul class="neighbours-links">
		<li><a href="//www.kryogenix.org/days/2004/05/14/preference/">Previous post</a></li>
		<li><a href="//www.kryogenix.org/days/2004/05/20/generatiopn/">Next post</a></li>
		</ul>
	</div> <!--/#main-->
</div>  <!--/#post-->
<div id="webmentions">
<h4>More in the discussion (powered by <a href="http://indiewebcamp.com/Webmention">webmentions</a>)</h4>
	<ul><li>(no mentions, yet.)</li></ul>
<form id="wmform" method="POST" action="https://webmention.herokuapp.com/api/webmention">
	<label>Did you link to this post? Enter your page's URL:
	<input type="url" name="source"></label>
	<input type="hidden" name="target" value="http://www.kryogenix.org/days/2004/05/17/showdomtreeii/">
	<input type="submit" value="Add link">
</form>
<script src="//www.kryogenix.org/days/theme/live-webmentions-cors.js"></script>
</div>

<p id="oldcomments"></p>
<script>
var aurl = '2004/05/17/showdomtreeii/';
var parts = aurl.split('/');
if (parts[parts.length-1] === "") { parts = parts.slice(0, parts.length-1); }
var tooNewForOldComments = false;
if (parts[0].match(/^[0-9]+$/)) {
	var asnum = parseInt(parts[0], 10);
	if (!isNaN(asnum) && asnum > 2014) {
		tooNewForOldComments = true;
	}
}
if (!tooNewForOldComments) {
	var comurl = "/oldcomments/" + parts.join("-") + ".html";
	var x = new XMLHttpRequest();
	x.open("HEAD", comurl, true);
	x.onreadystatechange = function() {
		if (x.readyState == 4) {
			if (x.status == 200) {
				document.getElementById("oldcomments").innerHTML = '<a href="' + comurl + '">See pre-2014 comments on this post</a>';
			}
		}
	};
	x.send();
}
</script>

		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://pelican.readthedocs.org">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
				<script type="text/javascript">
					var _gaq = _gaq || [];
					_gaq.push(['_setAccount', 'UA-331575-1']);
					_gaq.push(['_trackPageview']);
					(function() {
						var ga = document.createElement('script'); 
						ga.type = 'text/javascript'; ga.async = true;
						ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
						var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
					})();
				</script>
		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>