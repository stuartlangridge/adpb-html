<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>as days pass by - sil</title><link href="https://www.kryogenix.org/days/" rel="alternate"></link><link href="https://www.kryogenix.org/days/feeds/sil.atom.xml" rel="self"></link><id>https://www.kryogenix.org/days/</id><updated>2023-10-05T09:44:00+01:00</updated><subtitle>scratched tallies on the prison wall</subtitle><entry><title>A software Matter device that Alexa can talk to</title><link href="https://www.kryogenix.org/days/2023/10/05/a-software-matter-device-that-alexa-can-talk-to/" rel="alternate"></link><published>2023-10-05T09:44:00+01:00</published><updated>2023-10-05T09:44:00+01:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2023-10-05:/days/2023/10/05/a-software-matter-device-that-alexa-can-talk-to/</id><summary type="html">&lt;blockquote cite="https://en.wikipedia.org/wiki/Shaddap_You_Face?useskin=vector"&gt;What’s-a matter you? Hey!&lt;br&gt;
Gotta no respect?&lt;br&gt;
What-a you t’ink you do, why you look-a so sad?&lt;br&gt;
It’s-a not so bad, it’s-a nice-a place
    &lt;footer&gt;&lt;cite&gt;Shaddap Your Face, Joe Dolce&lt;/cite&gt;&lt;/footer&gt;
&lt;/blockquote&gt;

&lt;p&gt;(If you just want to know about how to make your own Matter device in software and …&lt;/p&gt;</summary><content type="html">&lt;blockquote cite="https://en.wikipedia.org/wiki/Shaddap_You_Face?useskin=vector"&gt;What’s-a matter you? Hey!&lt;br&gt;
Gotta no respect?&lt;br&gt;
What-a you t’ink you do, why you look-a so sad?&lt;br&gt;
It’s-a not so bad, it’s-a nice-a place
    &lt;footer&gt;&lt;cite&gt;Shaddap Your Face, Joe Dolce&lt;/cite&gt;&lt;/footer&gt;
&lt;/blockquote&gt;

&lt;p&gt;(If you just want to know about how to make your own Matter device in software and don’t want to read a whole story to get to that point, then first of all that’s, I mean, that’s &lt;em&gt;fine&lt;/em&gt;, it’s not a problem, you go ahead, I’m not hurt at &lt;em&gt;all&lt;/em&gt;, definitely not, and secondly skip down to &lt;a href="#matterpart4"&gt;Part 4&lt;/a&gt; or check out the &lt;a href="https://github.com/stuartlangridge/simple-js-matter-device"&gt;Github repo&lt;/a&gt;. But, I mean, really? You’re that busy? You might wanna find a way to chill out a bit. Have a cup of tea. Enjoy life. It’s better, I promise.)&lt;/p&gt;
&lt;h1&gt;Part the first: the kingdom of the blind&lt;/h1&gt;
&lt;p&gt;I’ve got new window blinds in my flat. They’re pretty cool; ivory and purple, we’re all very pleased. They’re from Hillarys, who don’t get a link because although the actual blinds are great, their customer service is… less so, so I’m loath to recommend them. But one of the neat things about them is that they’re electrically operated. There’s a remote control; press the up or down button and they go up and down. Some people would be like a fascinated small child with this technology and spend half of the first day just pressing the buttons and giggling, but not me, no no.&lt;/p&gt;
&lt;p&gt;&lt;img alt="A white room interior with a window covered by a day-night blind in a deep purple. The blind is alternating horizontal strips of deep purple fabric with a light texture, and almost-transparent white muslin. The room interior looks like a show home, because it probably is; the image is taken from Hillarys' website rather than being of my flat" src="https://kryogenix.org/images/purple-blinds-hillarys.jpg"&gt;&lt;/p&gt;
&lt;p&gt;One of the questions I was asked when speccing them out was: do you want them to be controllable by Alexa? And I thought: well, yes, I would like that. Being able to command my blinds to open or close is one more step on the quest to be a James Bond villain. All I need after that is a monorail and a big picture on the wall which revolves to show my world domination map and I’m golden.&lt;/p&gt;
&lt;p&gt;But… I do not like or trust the IoT industry. I’m not entirely against the whole concept — I mean, I &lt;em&gt;have&lt;/em&gt; an Amazon Echo, after all. It gets used for cooking timers, my shopping list, and music&lt;sup id="sf-a-software-matter-device-that-alexa-can-talk-to-1-back"&gt;&lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-1" class="simple-footnote" title="less so music than before, after the bloody shysters at Amazon decided to take away the free music playing from Amazon Prime and make people pay extra for it"&gt;1&lt;/a&gt;&lt;/sup&gt;, but it doesn’t get used for IoT stuff because I don’t have any. This is, basically, because the whole IoT industry is full of grifters and thieves and I do not trust them with my data or with still being around in two years. The whole idea that I speak to a thing in my flat, that thing routes my command up to some server run by an IoT vendor, and then the IoT vendor’s server speaks to another thing in my flat to make it do work… this is a stupid plan. It’s the vendor forcibly inserting themselves as a middle man for literally no reason other than to exploit me later. Because they’ll get bored or bought in a few years and they’ll shut down the servers, with a sorry-not-sorry email about how it’s “no longer viable to support” a thing I paid for and therefore they’re turning it into a brick, but I can buy a replacement for the low low cost of… anyway, I’m not doing it. No. I don’t want some random vendor’s server to punch a hole into my internal network, I don’t want my stuff to stop working if they turn their servers off or they go down, and the whole concept is hugely irritating.&lt;/p&gt;
&lt;p&gt;&lt;img alt='A tweet from j_opdenakker reading "the S in IoT stands for Security' src="https://kryogenix.org/images/s-in-iot.png"&gt;&lt;/p&gt;
&lt;p&gt;(You might be thinking: why do you have an Echo at all, then? That’s got all the same problems! And you’re not wrong. But I trust Amazon to still be around for a while. Trusting them with my data is another thing, of course, but I’m already on board with that… although I entirely sympathise with people who choose to not do so either from distrust or from objections to their crappy employment or sales practices.)&lt;/p&gt;
&lt;p&gt;Anyway, I looked up these blinds and the Alexa integration they do comes via a company called &lt;a href="https://www.somfy.co.uk/products/electric-blinds"&gt;Somfy&lt;/a&gt;. Their APIs seem semi-reasonably documented and I’ve heard nothing specifically bad about them as a company… but I still don’t like the idea. If I were &lt;a href="https://mjg59.dreamwidth.org/"&gt;Matthew Garrett&lt;/a&gt; then I would probably find joy in reverse-engineering whatever the protocol is and making it work for me, but I’m not as clever as he is&lt;sup id="sf-a-software-matter-device-that-alexa-can-talk-to-2-back"&gt;&lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-2" class="simple-footnote" title="I make up for it by being, like, twice his size, though"&gt;2&lt;/a&gt;&lt;/sup&gt;. And they’ll get bored or bought: I’m not sure I trust them to keep their servers running for years and years. Maybe I’d be &lt;span class="caps"&gt;OK&lt;/span&gt; with a thing that required an internet connection to someone else’s server and only let me fiddle with that to the extent that I am given &lt;em&gt;permission&lt;/em&gt; for&lt;sup id="sf-a-software-matter-device-that-alexa-can-talk-to-3-back"&gt;&lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-3" class="simple-footnote" title="honestly, this is the big issue. I react very badly to stuff where I ought to be able to do a thing and I’m not permitted to do so because they don’t want me to or can’t be bothered to implement it, and won’t let me do it myself. This is one of the big things that makes me move away from iOS every few years"&gt;3&lt;/a&gt;&lt;/sup&gt;, if I’d only expect to keep that thing for a short time, but these are window blinds. How often do you change &lt;em&gt;your&lt;/em&gt; window blinds? I expect these will still be here in twenty years! Do I expect these servers to also be there that long? Hell no. So, I’m not doing that.&lt;/p&gt;
&lt;h1&gt;Part the second: keep government local&lt;/h1&gt;
&lt;p&gt;I do actually have one “IoT” device in my flat, though. It’s a remotely-controllable wall socket. It’s from a company called &lt;a href="https://www.mylocalbytes.com/"&gt;LocalBytes&lt;/a&gt;, and it’s basically a “smart plug”: it’s a cylinder that plugs into a wall socket, and has another socket on the other side of it, rather like one of those mini gangplug cube things. &lt;/p&gt;
&lt;p&gt;&lt;img alt="A LocalBytes smart plug, as described, plugged into a wall socket" src="https://kryogenix.org/images/localbytes-smart-plug.jpg"&gt;&lt;/p&gt;
&lt;p&gt;It contains a little microcontroller and wifi chip, and it runs software called &lt;a href="https://tasmota.github.io/docs/"&gt;Tasmota&lt;/a&gt;. And it’s entirely locally controlled; you get a Tasmota app (or talk the documented protocol yourself from code) which can send the plug a command to turn on and off (and also a bunch more complex stuff such as turning on at a specific time), and it involves no internet servers at all. I can’t get screwed by you turning off your servers (or failing to secure them properly) if there aren’t any&lt;sup id="sf-a-software-matter-device-that-alexa-can-talk-to-4-back"&gt;&lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-4" class="simple-footnote" title="insert picture here of that bloke tapping his temple knowingly"&gt;4&lt;/a&gt;&lt;/sup&gt;. Now, I would not recommend these Tasmota devices to a normal person; the app is unreliable and pretends it can’t find the device some of the time, and the configuration &lt;span class="caps"&gt;API&lt;/span&gt; is obscure and weird. But I am, as has been said by kings and queens, not a normal person. I’m a computer bloke. So I am &lt;span class="caps"&gt;OK&lt;/span&gt; with this, and I’d be &lt;span class="caps"&gt;OK&lt;/span&gt; with something similar to control my blinds; something that runs locally and accepts commands from Alexa and then talks to the blinds to open and close them.&lt;/p&gt;
&lt;p&gt;Now, the bit that actually talks to the blinds, I haven’t started working on yet. As far as I can tell from reading, the remote control works on a standard &lt;a href="https://en.wikipedia.org/wiki/LPD433"&gt;“smart home” frequency of 433MHz&lt;/a&gt;, and there are loads of little dongles and boards that plug into &lt;span class="caps"&gt;USB&lt;/span&gt; or Raspberry Pi &lt;span class="caps"&gt;GPIO&lt;/span&gt; pins which can talk that. I’ll get to that eventually; once I have a working thing, making it talk 433MHz is step 2. Step 1 is to make something that I control and which Alexa can talk to, but which &lt;em&gt;doesn’t&lt;/em&gt; require servers on the internet to make it work. This rules out writing a custom Alexa skill; I can do that, and have, but you can’t write a skill which makes the actual Echo in my flat do network connections. The connection comes from Amazon’s servers, which means I’d have to put my little device on the internet, which I don’t want to do. The concern of the servers going away doesn’t apply here — if Amazon’s servers go away, my Echo stops working anyway and all of this is moot — but I do not want to punch a hole into my internal network from outside, and I shouldn’t have to. This is one thing in my house talking to another thing in my house. &lt;/p&gt;
&lt;p&gt;This problem used to be unsolvable. And then, just like in the beginning of all things, someone invented &lt;a href="https://csa-iot.org/all-solutions/matter/"&gt;Matter&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Part the third: does it Matter?&lt;/h1&gt;
&lt;p&gt;It is, obviously, stupid that every device invents its own protocol to talk to it, and none of it’s documented, and none of it’s standardised, and everything gets reinvented from scratch by programmers who clearly have their minds on lunchtime. So, equally obviously, the way to solve this is to have all the biggest tech companies in the world collaboratively agree on a standard way to do things.&lt;/p&gt;
&lt;p&gt;I can hear you laughing from here.&lt;/p&gt;
&lt;p&gt;This has, equally equally obviously, resulted in a disastrous nine-way collision of corporate speak, absurd specifications, paywalls for things, requirements to sign up as a “partner” before you’re told anything, and documentation by press release. But to my surprise it has actually resulted in something! The Matter specifications have basically everybody on board — Amazon, Apple, Google, most of the big players in the device world — and have finally started to actually appear in real shipping products rather than only in conference talks. The Amazon Echo supports Matter back to the 3rd gen Dot (there’s a &lt;a href="https://www.amazon.co.uk/b?ie=UTF8&amp;amp;node=63710514031"&gt;list of Matter-supporting Echo devices here&lt;/a&gt;). If you’ve got a Matter-supporting thingy, then it’ll have the Matter logo on it:&lt;/p&gt;
&lt;p&gt;&lt;img alt='The Matter logo: three arrows with curved heads all pointing into a single central point; it has threefold symmetry like the radiation symbol and similar things. It also has the word "matter" in a curvy slightly childish font' src="https://kryogenix.org/images/matter-logo.jpg"&gt;&lt;/p&gt;
&lt;p&gt;and then you can say “Alexa, discover devices” and your Echo will search and then say “I have found a Matter device!”. You then use the Alexa app on your phone to pair it, either by scanning a &lt;span class="caps"&gt;QR&lt;/span&gt; code or typing in a code, both of which should be on the device itself.&lt;/p&gt;
&lt;p&gt;Now, Matter is a big corporate spec and wants to deal with all sorts of complicated and detailed edge cases. In particular, there is a standard problem with an IoT device in your house, which is that you can’t talk to it until it’s on the wifi, but you can’t put it on the wifi without talking to it. This normally involves the device pretending to be a wifi access point, and you connecting to it with a mobile app you have to install&lt;sup id="sf-a-software-matter-device-that-alexa-can-talk-to-5-back"&gt;&lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-5" class="simple-footnote" title="you should not need a mobile app to connect to a device pretending to be an access point. You should be able to do this from the web browser on your phone. But you can’t, as I have laboriously discussed before in these pages and am still annoyed about"&gt;5&lt;/a&gt;&lt;/sup&gt;, but Matter attempts to improve this; a Matter device can potentially exchange data over wifi, over Bluetooth, over some extra network thing called Thread that I don’t understand, over ethernet, the works. A lot of the setup and spec for Matter involves dealing with all this.&lt;/p&gt;
&lt;p&gt;I, personally, for myself, for this device, do not care about this. If I were making a device that would be sold to real people, I’d implement all this stuff. But since it’s just me, I’m &lt;span class="caps"&gt;OK&lt;/span&gt; with requiring that my window blind device is &lt;em&gt;already&lt;/em&gt; on my wifi, and getting it that way is my problem, &lt;em&gt;before&lt;/em&gt; I try detecting it with Alexa.&lt;/p&gt;
&lt;p&gt;So, I need a way to make a Matter device; it only has to deal with wifi. The Matter specification&lt;sup id="sf-a-software-matter-device-that-alexa-can-talk-to-6-back"&gt;&lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-6" class="simple-footnote" title="as usual with corporate technology things, the Matter specification is difficult to find; one of these things where you need to sign up, or be a “partner”, or pay money, or something. But it is obtainable. The Alexa Matter docs link to a page on the Matter website which lets you fill in an email address and then emails you a link to  in all its 895 page glory"&gt;6&lt;/a&gt;&lt;/sup&gt; describes how to talk Matter&lt;sup id="sf-a-software-matter-device-that-alexa-can-talk-to-7-back"&gt;&lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-7" class="simple-footnote" title="super reassuringly, Matter seems to use all standard protocols! device discovery is mdns! They even have example commands for avahi-publish-service to show you how to do it, right there in the spec!"&gt;7&lt;/a&gt;&lt;/sup&gt;, but there’s a lot of detail in there. Surely someone has already implemented this stuff?&lt;/p&gt;
&lt;p&gt;Well, they have… but it’s not great. The &lt;a href="https://github.com/project-chip/connectedhomeip"&gt;@project-chip/connectedhomeip&lt;/a&gt; Github repository, named back in the days when Matter was still called “project &lt;span class="caps"&gt;CHIP&lt;/span&gt;” before the Branding People got their hands on it, is the reference implementation. And it’s a nightmare. It’s all in C, it’s &lt;em&gt;huge&lt;/em&gt; (I checked out the repo and all its submodules and ran out of disk space; to get the repo and all sub-repos and then build it, you’d better have &lt;span class="caps"&gt;30GB&lt;/span&gt; or so free), compiling it all is a massive headache, it contains code for all sorts of different single-board computers to make them Matter devices, and I couldn’t make head nor tail of it. I’m sure you need all this if you’re looking to build a device and ship millions of them to people in Best Buy and Currys, but I ain’t. Normally, people write stuff like this in Python, but in looking around all I could find was a &lt;a href="https://github.com/home-assistant-libs/python-matter-server"&gt;Python library&lt;/a&gt; designed to work with &lt;a href="https://www.home-assistant.io/"&gt;Home Assistant&lt;/a&gt;, which is not what I wanted (I want to make a device, not a controller) and which required the &lt;span class="caps"&gt;CHIP&lt;/span&gt; &lt;span class="caps"&gt;SDK&lt;/span&gt; anyway, the big complicated nightmare thing mentioned above. I resigned myself to having to write a very noddy implementation of enough of Matter’s pairing and communications stuff in Python to get a device up and running, and bitched about having to do this on social media. And then &lt;a href="https://mastodon.ie/@AlanBell"&gt;Alan Bell&lt;/a&gt;, hero of the revolution, said: have you tried &lt;a href="https://github.com/project-chip/matter.js"&gt;matter.js&lt;/a&gt;?&lt;sup id="sf-a-software-matter-device-that-alexa-can-talk-to-8-back"&gt;&lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-8" class="simple-footnote" title="There is an unfortunate naming collision here. There already was a Matter.js: it’s a 2d physics engine for the web, which I’ve used before. But I can’t see what else the people implementing the Matter spec in JavaScript could have called their thing. Only so many words in the world, I guess"&gt;8&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;I had not. So I gave it a look.&lt;/p&gt;
&lt;h1 id="matterpart4"&gt;Part the fourth: yes it Matters!&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/project-chip/matter.js"&gt;Matter.js&lt;/a&gt; is an implementation of the Matter suite of protocols in JavaScript. It does not build on the huge complicated Project &lt;span class="caps"&gt;CHIP&lt;/span&gt; &lt;span class="caps"&gt;SDK&lt;/span&gt;; it’s its own thing. And it just works.&lt;/p&gt;
&lt;p&gt;If you want to build a Matter device in JavaScript, take a look at &lt;a href="https://github.com/project-chip/matter.js/blob/main/packages/matter-node.js-examples/README.md"&gt;the Matter.js Node examples&lt;/a&gt; and they work fine. You can do that right now.&lt;/p&gt;
&lt;p&gt;I did something a little tiny bit different. The Matter.js stuff is not actually &lt;span class="caps"&gt;JS&lt;/span&gt;; it’s TypeScript. I don’t like TypeScript&lt;sup id="sf-a-software-matter-device-that-alexa-can-talk-to-9-back"&gt;&lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-9" class="simple-footnote" title="feel free to email your long diatribe about why TypeScript is the future to IDontCare@Whatever.Bored"&gt;9&lt;/a&gt;&lt;/sup&gt; and so I wanted a plain &lt;span class="caps"&gt;JS&lt;/span&gt; thing. So I did a simple reimplementation of the simplest Matter.js example in plain &lt;span class="caps"&gt;JS&lt;/span&gt;, and made it even simpler; the original correctly lets you pass in a bunch of details on the command line to configure it, but I’m not bothered about that and wanted to keep it as simple as possible. So, &lt;a href="https://github.com/stuartlangridge/simple-js-matter-device"&gt;the simplest possible “virtual” Matter device implemented in JavaScript&lt;/a&gt;. It’s a lightbulb; Alexa, and Matter, do support multiple types of devices (including window blind controllers!) but Matter.js only does lightbulbs and sockets at the moment. I’m probably going to build and contribute the window blind controller device type, if someone else doesn’t get there first. Anyway, let’s get this code running! Use is pretty easy for a developer:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;https://github.com/stuartlangridge/simple-js-matter-device.git
Cloning&lt;span class="w"&gt; &lt;/span&gt;into&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;'simple-js-matter-device'&lt;/span&gt;...
remote:&lt;span class="w"&gt; &lt;/span&gt;Enumerating&lt;span class="w"&gt; &lt;/span&gt;objects:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;done&lt;/span&gt;.
remote:&lt;span class="w"&gt; &lt;/span&gt;Counting&lt;span class="w"&gt; &lt;/span&gt;objects:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;/11&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;done&lt;/span&gt;.
remote:&lt;span class="w"&gt; &lt;/span&gt;Compressing&lt;span class="w"&gt; &lt;/span&gt;objects:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;/10&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;done&lt;/span&gt;.
remote:&lt;span class="w"&gt; &lt;/span&gt;Total&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;delta&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;reused&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;delta&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;pack-reused&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
Receiving&lt;span class="w"&gt; &lt;/span&gt;objects:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;/11&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;25&lt;/span&gt;.16&lt;span class="w"&gt; &lt;/span&gt;KiB&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.48&lt;span class="w"&gt; &lt;/span&gt;MiB/s,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;done&lt;/span&gt;.
$&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;simple-js-matter-device
$&lt;span class="w"&gt; &lt;/span&gt;npm&lt;span class="w"&gt; &lt;/span&gt;install

added&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;90&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;packages,&lt;span class="w"&gt; &lt;/span&gt;and&lt;span class="w"&gt; &lt;/span&gt;audited&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;91&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;packages&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;5s

&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;packages&lt;span class="w"&gt; &lt;/span&gt;are&lt;span class="w"&gt; &lt;/span&gt;looking&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;funding
&lt;span class="w"&gt;  &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;npm&lt;span class="w"&gt; &lt;/span&gt;fund&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;details

found&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;vulnerabilities
$&lt;span class="w"&gt; &lt;/span&gt;node&lt;span class="w"&gt; &lt;/span&gt;sil.mjs&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="m"&gt;2023&lt;/span&gt;-10-06&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;:38:24.231&lt;span class="w"&gt; &lt;/span&gt;INFO&lt;span class="w"&gt;  &lt;/span&gt;Device&lt;span class="w"&gt;               &lt;/span&gt;node-matter
▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
█&lt;span class="w"&gt; &lt;/span&gt;▄▄▄▄▄&lt;span class="w"&gt; &lt;/span&gt;██▀▄▀▄█&lt;span class="w"&gt; &lt;/span&gt;▄▄▄▄▄&lt;span class="w"&gt; &lt;/span&gt;█
█&lt;span class="w"&gt; &lt;/span&gt;█&lt;span class="w"&gt;   &lt;/span&gt;█&lt;span class="w"&gt; &lt;/span&gt;█▄▀▄▀▄█&lt;span class="w"&gt; &lt;/span&gt;█&lt;span class="w"&gt;   &lt;/span&gt;█&lt;span class="w"&gt; &lt;/span&gt;█
█&lt;span class="w"&gt; &lt;/span&gt;█▄▄▄█&lt;span class="w"&gt; &lt;/span&gt;██&lt;span class="w"&gt; &lt;/span&gt;▀▀▄█&lt;span class="w"&gt; &lt;/span&gt;█▄▄▄█&lt;span class="w"&gt; &lt;/span&gt;█
█▄▄▄▄▄▄▄█&lt;span class="w"&gt; &lt;/span&gt;█&lt;span class="w"&gt; &lt;/span&gt;▀▄█▄▄▄▄▄▄▄█
█&lt;span class="w"&gt; &lt;/span&gt;▄&lt;span class="w"&gt; &lt;/span&gt;█▄&lt;span class="w"&gt; &lt;/span&gt;▄▄▄█&lt;span class="w"&gt; &lt;/span&gt;█&lt;span class="w"&gt;  &lt;/span&gt;▄▀██&lt;span class="w"&gt; &lt;/span&gt;█▀█
██▀&lt;span class="w"&gt;  &lt;/span&gt;█▀▄█▄&lt;span class="w"&gt; &lt;/span&gt;█&lt;span class="w"&gt; &lt;/span&gt;▀▀▄█&lt;span class="w"&gt;  &lt;/span&gt;▀█▀█
██▄█▄▄█▄▄█▄▄▀&lt;span class="w"&gt; &lt;/span&gt;▀▄&lt;span class="w"&gt; &lt;/span&gt;█▄▀▄▀█
█&lt;span class="w"&gt; &lt;/span&gt;▄▄▄▄▄&lt;span class="w"&gt; &lt;/span&gt;█&lt;span class="w"&gt;  &lt;/span&gt;▄█▄█▄▄&lt;span class="w"&gt; &lt;/span&gt;▄&lt;span class="w"&gt; &lt;/span&gt;█&lt;span class="w"&gt; &lt;/span&gt;█
█&lt;span class="w"&gt; &lt;/span&gt;█&lt;span class="w"&gt;   &lt;/span&gt;█&lt;span class="w"&gt; &lt;/span&gt;█▄▄&lt;span class="w"&gt; &lt;/span&gt;█▄&lt;span class="w"&gt; &lt;/span&gt;▄&lt;span class="w"&gt; &lt;/span&gt;▀▄&lt;span class="w"&gt; &lt;/span&gt;▀██
█&lt;span class="w"&gt; &lt;/span&gt;█▄▄▄█&lt;span class="w"&gt; &lt;/span&gt;█&lt;span class="w"&gt;  &lt;/span&gt;▀█▄█&lt;span class="w"&gt; &lt;/span&gt;▀█&lt;span class="w"&gt;  &lt;/span&gt;▀&lt;span class="w"&gt; &lt;/span&gt;█
█▄▄▄▄▄▄▄█▄███▄██▄██▄█▄█
▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀

&lt;span class="m"&gt;2023&lt;/span&gt;-10-06&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;:38:24.330&lt;span class="w"&gt; &lt;/span&gt;INFO&lt;span class="w"&gt;  &lt;/span&gt;Device&lt;span class="w"&gt;               &lt;/span&gt;QR&lt;span class="w"&gt; &lt;/span&gt;Code&lt;span class="w"&gt; &lt;/span&gt;URL:&lt;span class="w"&gt; &lt;/span&gt;https://project-chip.github.io/connectedhomeip/qrcode.html?data&lt;span class="o"&gt;=&lt;/span&gt;MT:Y.K90-Q000KA0648G00
&lt;span class="m"&gt;2023&lt;/span&gt;-10-06&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;:38:24.330&lt;span class="w"&gt; &lt;/span&gt;INFO&lt;span class="w"&gt;  &lt;/span&gt;Device&lt;span class="w"&gt;               &lt;/span&gt;Manual&lt;span class="w"&gt; &lt;/span&gt;pairing&lt;span class="w"&gt; &lt;/span&gt;code:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;34970112332&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We’ve git cloned the repository, done &lt;code&gt;npm install&lt;/code&gt; to install the dependencies, and run it. That starts up our virtual device, and also prints the &lt;span class="caps"&gt;QR&lt;/span&gt; code and manual pairing code used for pairing. Job done; your device now exists.&lt;/p&gt;
&lt;p&gt;Next, we teach Alexa about it. Exercise your most commanding voice and say “Alexa, discover new devices!” Your Echo will tell you it’s doing it, and then after a few seconds of searching, tell you that it’s found one Matter device and send you off to the devices section of the Alexa app on your phone to connect it up; I also got a notification on my phone telling me the same thing.&lt;/p&gt;
&lt;p&gt;&lt;img alt='an iOS lock screen showing a notification reading "Tap to begin setup with Alexa: New Matter Device found' src="https://kryogenix.org/images/matter-ios-shots/01-notification.png"&gt;&lt;/p&gt;
&lt;p&gt;Hit that notification and you end up on the Devices screen, where it’ll tell you to “Connect your Matter Light Bulb”:&lt;/p&gt;
&lt;p&gt;&lt;img alt="the Alexa app's Devices screen, with &amp;quot;Connect your Matter Light Bulb&amp;quot; in a newly showing &amp;quot;Available Devices&amp;quot; section" src="https://kryogenix.org/images/matter-ios-shots/02-devices.png"&gt;&lt;/p&gt;
&lt;p&gt;(For some reason, my device seems to present as two separate devices; a light bulb and an unnamed “Matter device”. I don’t know why. It seems that you can pick either.)&lt;/p&gt;
&lt;p&gt;Choose to connect to this Matter device, and you get a screen called “Control your Matter device with Alexa”, which is exactly what we want to do:&lt;/p&gt;
&lt;p&gt;&lt;img alt='the Alexa app showing a screen headlined "Control your Matter device with Alexa", and Cancel and Next buttons' src="https://kryogenix.org/images/matter-ios-shots/03-control.png"&gt;&lt;/p&gt;
&lt;p&gt;When asked if your device has a Matter logo, say yes (it would do if it were a real Matter device, of course):&lt;/p&gt;
&lt;p&gt;&lt;img alt='the Alexa app showing a screen headlined "Does your device have a Matter logo?", and No and Yes buttons' src="https://kryogenix.org/images/matter-ios-shots/04-logo.png"&gt;&lt;/p&gt;
&lt;p&gt;Then you have to scan the &lt;span class="caps"&gt;QR&lt;/span&gt; code. Usefully, the device has printed out a &lt;span class="caps"&gt;QR&lt;/span&gt; code in the Terminal where you ran it, above; scan that. If that didn’t work for some reason, it has also printed a &lt;span class="caps"&gt;URL&lt;/span&gt; for that &lt;span class="caps"&gt;QR&lt;/span&gt; code which you can follow to show the &lt;span class="caps"&gt;QR&lt;/span&gt; in the browser, and if that doesn’t work either, you can enter the numeric code it printed (the “manual pairing code) instead:&lt;/p&gt;
&lt;p&gt;&lt;img alt='the Alexa app showing a screen headlined "Locate a QR code shown for your device", and "Try numeric code instead?" and "Scan QR code" buttons' src="https://kryogenix.org/images/matter-ios-shots/05-qr.png"&gt;&lt;/p&gt;
&lt;p&gt;Alexa will then claim to be “Looking for your device” (and the stuff in the Terminal will print a bunch of logging things about “Pase server: Received pairing request from udp://192.168.1.103:5541” and whatnot):&lt;/p&gt;
&lt;p&gt;&lt;img alt='the Alexa app showing a screen headlined "Looking for your device", and a waiting spinner' src="https://kryogenix.org/images/matter-ios-shots/06-looking.png"&gt;&lt;/p&gt;
&lt;p&gt;and then, all else being good, you’ll get a screen telling you your light is connected! It’s called “Kryogenix Light” in this screen, and “Stuart Light” elsewhere; you can see those strings in &lt;code&gt;sil.mjs&lt;/code&gt; and can customise them to your heart’s content.&lt;/p&gt;
&lt;p&gt;&lt;img alt='the Alexa app showing a screen headlined "Kryogenix Light found and connected", and a Next button' src="https://kryogenix.org/images/matter-ios-shots/07-connected.png"&gt;&lt;/p&gt;
&lt;p&gt;You should now have a “Lights” section in the Devices screen of your Alexa app. You can use this to turn the “light” on and off from the Alexa app, or you can say “Alexa, turn Stuart Light on” to do it by voice. When you do that, the Terminal should print &lt;code&gt;!!!!!!!!!!!!!!!! GOT COMMAND true&lt;/code&gt; (or &lt;code&gt;false&lt;/code&gt;), which means it’s calling the &lt;code&gt;onOffListener&lt;/code&gt; we &lt;a href="https://github.com/stuartlangridge/simple-js-matter-device/blob/56e4d964c1f1fc5ff9164292bca3b20cea262d5f/sil.mjs#L45"&gt;defined in sil.mjs&lt;/a&gt;. You can customise this to do whatever you’d like!&lt;/p&gt;
&lt;p&gt;&lt;img alt='the Alexa app showing a screen headlined "Stuart Light", and a big circular on/off power button, currently set to On with a blue halo around it' src="https://kryogenix.org/images/matter-ios-shots/08-onoff.png"&gt;&lt;/p&gt;
&lt;p&gt;And that’s it working. That’s a software device, which you can pair with Alexa and customise how you choose; it doesn’t require you to write an Alexa skill, and the device does not need to be accessible from the internet. That’s just what I want.&lt;/p&gt;
&lt;p&gt;Now I suppose I have to make it do something useful…&lt;/p&gt;&lt;ol class="simple-footnotes"&gt;&lt;li id="sf-a-software-matter-device-that-alexa-can-talk-to-1"&gt;less so music than before, after the bloody shysters at Amazon decided to take away the free music playing from Amazon Prime and make people pay extra for it &lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-1-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-a-software-matter-device-that-alexa-can-talk-to-2"&gt;I make up for it by being, like, twice his size, though &lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-2-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-a-software-matter-device-that-alexa-can-talk-to-3"&gt;honestly, this is the big issue. I react very badly to stuff where I &lt;em&gt;ought&lt;/em&gt; to be able to do a thing and I’m not permitted to do so because they don’t want me to or can’t be bothered to implement it, and won’t let me do it myself. This is one of the big things that makes me move away from iOS every few years &lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-3-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-a-software-matter-device-that-alexa-can-talk-to-4"&gt;insert picture here of that bloke tapping his temple knowingly &lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-4-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-a-software-matter-device-that-alexa-can-talk-to-5"&gt;you should not need a mobile app to connect to a device pretending to be an access point. You should be able to do this from the web browser on your phone. But you can’t, as &lt;a href="https://www.kryogenix.org/days/2020/08/18/iot-devices-and-android-and-disappointment/"&gt;I have laboriously discussed before in these pages&lt;/a&gt; and am still annoyed about &lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-5-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-a-software-matter-device-that-alexa-can-talk-to-6"&gt;as usual with corporate technology things, the Matter specification is difficult to find; one of these things where you need to sign up, or be a “partner”, or pay money, or something. But it is obtainable. &lt;a href="https://developer.amazon.com/en-US/docs/alexa/smarthome/matter-support.html"&gt;The Alexa Matter docs&lt;/a&gt; link to &lt;a href="https://csa-iot.org/developer-resource/specifications-download-request/"&gt;a page on the Matter website&lt;/a&gt; which lets you fill in an email address and then emails you a link to &lt;a href="https://csa-iot.org/wp-content/uploads/2022/11/22-27349-001_Matter-1.0-Core-Specification.pdf"&gt;a &lt;span class="caps"&gt;PDF&lt;/span&gt; of the spec&lt;/a&gt; in all its 895 page glory &lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-6-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-a-software-matter-device-that-alexa-can-talk-to-7"&gt;super reassuringly, Matter seems to use all standard protocols! device discovery is mdns! They even have example commands for &lt;code&gt;avahi-publish-service&lt;/code&gt; to show you how to do it, right there in the spec! &lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-7-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-a-software-matter-device-that-alexa-can-talk-to-8"&gt;There is an unfortunate naming collision here. There already was a &lt;a href="https://brm.io/matter-js/"&gt;Matter.js&lt;/a&gt;: it’s a 2d physics engine for the web, which I’ve used before. But I can’t see what else the people implementing the Matter spec in JavaScript could have called their thing. Only so many words in the world, I guess &lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-8-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-a-software-matter-device-that-alexa-can-talk-to-9"&gt;feel free to email your long diatribe about why TypeScript is the future to IDontCare@Whatever.Bored &lt;a href="#sf-a-software-matter-device-that-alexa-can-talk-to-9-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;</content><category term="General musings"></category></entry><entry><title>Numeric Pangrams</title><link href="https://www.kryogenix.org/days/2023/08/06/numeric-pangrams/" rel="alternate"></link><published>2023-08-06T14:11:00+01:00</published><updated>2023-08-06T14:11:00+01:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2023-08-06:/days/2023/08/06/numeric-pangrams/</id><summary type="html">&lt;p&gt;A few days ago I had an interesting maths thought which I dropped &lt;a href="https://mastodon.social/@sil/110833073093233760"&gt;on Mastodon&lt;/a&gt;:&lt;/p&gt;
&lt;iframe src="https://mastodon.social/@sil/110833073093233760/embed" class="mastodon-embed" style="max-width: 100%; border: 0" width="400" allowfullscreen="allowfullscreen"&gt;
&lt;p&gt;Today’s interesting maths problem to think about: what is the largest total from a correct maths equation which uses any number of +*&amp;#45; symbols, one =, and the digits from 0-9 once&amp;nbsp;each?&lt;/p&gt;

&lt;p&gt;For example, if …&lt;/p&gt;&lt;/iframe&gt;</summary><content type="html">&lt;p&gt;A few days ago I had an interesting maths thought which I dropped &lt;a href="https://mastodon.social/@sil/110833073093233760"&gt;on Mastodon&lt;/a&gt;:&lt;/p&gt;
&lt;iframe src="https://mastodon.social/@sil/110833073093233760/embed" class="mastodon-embed" style="max-width: 100%; border: 0" width="400" allowfullscreen="allowfullscreen"&gt;
&lt;p&gt;Today’s interesting maths problem to think about: what is the largest total from a correct maths equation which uses any number of +*&amp;#45; symbols, one =, and the digits from 0-9 once&amp;nbsp;each?&lt;/p&gt;

&lt;p&gt;For example, if we’re doing it for digits 0-4, then 40-12=3 isn’t valid (answer is wrong), 1+3=4 isn’t valid (correct but doesn’t use 0 or 2), 12/4+0=3 is good, and 4*3+0=12 is better (because 12 is higher than&amp;nbsp;3).&lt;/p&gt;

&lt;p&gt;Is there an interesting way to solve this which isn’t “have a computer check all&amp;nbsp;possibilities”?&lt;/p&gt;
&lt;/iframe&gt;
&lt;script src="https://mastodon.social/embed.js" async="async"&gt;&lt;/script&gt;

&lt;p&gt;Disappointingly, I couldn&amp;#8217;t think of an interesting way to solve it which wasn&amp;#8217;t &amp;#8220;have a computer check all the possibilities&amp;#8221;, so I had a computer check all the&amp;nbsp;possibilities.&lt;/p&gt;
&lt;p&gt;I&amp;#8217;m not publishing the script, because it&amp;#8217;s not very good; in particular, I&amp;#8217;m sure this is the sort of thing that someone could make run in a few seconds if they were clever. I wasn&amp;#8217;t feeling clever, so I brute-forced it and just left it to run for a few&amp;nbsp;hours.&lt;/p&gt;
&lt;p&gt;These are numeric pangrams, I suppose you might call them. A pangram is a sentence which uses all the letters in the alphabet at least once: there are a bunch of famous English examples, starting with &amp;#8220;The quick brown fox jumps over a lazy dog&amp;#8221; and getting less and less comprehensible as they get shorter. Vexing quizzes show up a lot. Anyway, after I thought up the term &amp;#8220;numeric pangrams&amp;#8221; I checked to see if anybody else had already done so and of course Greg Ross at &lt;a href="https://www.futilitycloset.com/2007/10/11/numerical-pangrams/"&gt;Futility Closet&lt;/a&gt; did sixteen years ago. His examples are the digits from 1-9, though (his biggest example is &lt;code&gt;4 × 1963 = 7852&lt;/code&gt;), and my 0-9 suggestion allows for much larger total&amp;nbsp;values.&lt;/p&gt;
&lt;p&gt;Anyway, the best equations I could come up with which use all the digits from 0-9&amp;nbsp;were:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;42 × 8 × 91 = 30576&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;46 × 715 = 32890&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;4 × 9127 = 36508&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;63 × 927 = 58401&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;7 × 9403 = 65821&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is the sort of thing that &lt;a href="https://www.kryogenix.org/days/2018/02/08/sorry-henry/"&gt;Henry Dudeney&lt;/a&gt; would have cleverly done by hand. Python is the way forward, of&amp;nbsp;course.&lt;/p&gt;</content><category term="General musings"></category></entry><entry><title>Dungeons &amp; Dragons: Honour Among Thieves, a review</title><link href="https://www.kryogenix.org/days/2023/04/04/dungeons-dragons-honour-among-thieves-a-review/" rel="alternate"></link><published>2023-04-04T19:18:00+01:00</published><updated>2023-04-04T19:18:00+01:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2023-04-04:/days/2023/04/04/dungeons-dragons-honour-among-thieves-a-review/</id><summary type="html">&lt;p&gt;So, &lt;a href="https://en.wikipedia.org/wiki/Dungeons_%2526_Dragons:_Honor_Among_Thieves"&gt;Dungeons &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Dragons: Honour Among Thieves&lt;/a&gt;, which I have just watched. I have some thoughts. Spoilers from here on&amp;nbsp;out!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.imdb.com/title/tt2906216/"&gt;&lt;img src="https://kryogenix.org/random/dndhat.png" alt="Theatrical release poster for Honour Among Thieves which depicts a big D&amp;D logo in flames (a dragon curled into the form of an ampersand and breathing fire)"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Up front I shall say: that was &lt;span class="caps"&gt;OK&lt;/span&gt;. Not amazing, but not bad either. It could have been cringy, or worthy, and it was not. It struck a reasonable balance …&lt;/p&gt;</summary><content type="html">&lt;p&gt;So, &lt;a href="https://en.wikipedia.org/wiki/Dungeons_%2526_Dragons:_Honor_Among_Thieves"&gt;Dungeons &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Dragons: Honour Among Thieves&lt;/a&gt;, which I have just watched. I have some thoughts. Spoilers from here on&amp;nbsp;out!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.imdb.com/title/tt2906216/"&gt;&lt;img src="https://kryogenix.org/random/dndhat.png" alt="Theatrical release poster for Honour Among Thieves which depicts a big D&amp;D logo in flames (a dragon curled into the form of an ampersand and breathing fire)"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Up front I shall say: that was &lt;span class="caps"&gt;OK&lt;/span&gt;. Not amazing, but not bad either. It could have been cringy, or worthy, and it was not. It struck a reasonable balance between being overly puffed up with a sense of epic self-importance (which it avoided) and being campy and ridiculous and mocking all of us who are invested in the game (which it also avoided). So, a tentative thumbs-up, I suppose. That&amp;#8217;s the headline&amp;nbsp;review.&lt;/p&gt;
&lt;p&gt;But there is more to be considered in the movie. I do rather like that for those of us who play D&amp;amp;D, pretty much everything in the film was recognisable as an actual rules-compliant thing, without making a big deal about it. I&amp;#8217;m sure there are rules lawyers quibbling about the detail (&amp;#8220;blah blah wildshape into an owlbear&amp;#8221;, &amp;#8220;blah blah if she can cast time stop why does she need some crap adventurers to help&amp;#8221;) but that&amp;#8217;s all fine. It&amp;#8217;s a film, not a&amp;nbsp;rulebook.&lt;/p&gt;
&lt;p&gt;I liked how Honour Among Thieves is recognisably using canon from an existing D&amp;amp;D land, Faerûn, but without making it important; someone who doesn&amp;#8217;t know this stuff will happily pass over the names of Szass Tam or Neverwinter or Elminster or Mordenkainen as irrelevant world-building, but that&amp;#8217;s in there for those of us who know those names. It&amp;#8217;s the good sort of fanservice; the sort that doesn&amp;#8217;t ruin things if you&amp;#8217;re not a&amp;nbsp;fan.&lt;/p&gt;
&lt;p&gt;(Side notes: Simon is an Aumar? And more importantly, he&amp;#8217;s Simon the Sorcerer? Is that a sly reference to &lt;em&gt;the&lt;/em&gt; &lt;a href="https://en.wikipedia.org/wiki/Simon_the_Sorcerer"&gt;Simon the Sorcerer&lt;/a&gt;? Nice, if so. Also, I&amp;#8217;m sure there are one billion little references that I didn&amp;#8217;t catch but might on a second or third or tenth viewing, and also sure that there are one billion web pages categorising them all in exhaustive detail. I liked the different forms of Bigby&amp;#8217;s Hand. But what happened to the random in the gelatinous&amp;nbsp;cube?)&lt;/p&gt;
&lt;p&gt;And Chris Pine is nowhere near as funny as he thinks he is. Admittedly, he&amp;#8217;s playing a character, and obviously Edgin the character&amp;#8217;s vibe is that Edgin is not as funny as he thinks he is, but even given that, it felt like half the jokes were delivered badly and flatly. Marvel films get the comedy right; this film seemed a bit mocking of the concept, and didn&amp;#8217;t work for me at&amp;nbsp;all.&lt;/p&gt;
&lt;p&gt;I was a bit disappointed in the story in Honour Among Thieves, though. The characters are shallow, as is the tale; there&amp;#8217;s barely any emotional investment in any of it. We&amp;#8217;re supposed, presumably, to identify with Simon&amp;#8217;s struggles to attune to the helmet and root for him, or with the unexpectedness of Holga&amp;#8217;s death and Edgin and Kira&amp;#8217;s emotions, but&amp;#8230; I didn&amp;#8217;t. None of it was developed enough; none of it made me feel for the characters and empathise with them. (&lt;span class="caps"&gt;OK&lt;/span&gt;, small tear at Holga&amp;#8217;s death scene. But I&amp;#8217;m easily emotionally manipulated by films. No problem with that.) Similarly, I was a bit annoyed at how flat and undeveloped the characters were at first; the paladin Xenk delivering the line about Edgin re-becoming a Harper with zero gravitas, and the return of the money to the people being nowhere near as epically presented as it could have&amp;nbsp;been.&lt;/p&gt;
&lt;p&gt;But then I started thinking, and I realised&amp;#8230; this is a D&amp;amp;D&amp;nbsp;campaign!&lt;/p&gt;
&lt;p&gt;That&amp;#8217;s not a complaint at all. The film is very much like an actual D&amp;amp;D game! When playing, we &lt;em&gt;do&lt;/em&gt; all strive for epic moves and fail to deliver them with the gravitas that a film would, because we&amp;#8217;re not pro actors. NPCs &lt;em&gt;do&lt;/em&gt; give up the info you want after unrealistically brief persuasion, because we want to get through that quick and we rolled an 18. The plans &lt;em&gt;are&lt;/em&gt; half-baked but with brilliant ideas (the portal painting was great). That&amp;#8217;s D&amp;amp;D! For&amp;nbsp;real!&lt;/p&gt;
&lt;p&gt;You know how when someone else is describing a fun #dnd game and the story doesn&amp;#8217;t resonate all that strongly with you? This is partially because the person telling you is generally not an expert storyteller, but mostly because you &lt;em&gt;weren&amp;#8217;t there&lt;/em&gt;. You didn&amp;#8217;t experience it happening, so you missed the good bits. The jokes, the small epic moments, the drama, the&amp;nbsp;bombast.&lt;/p&gt;
&lt;p&gt;That&amp;#8217;s what D&amp;amp;D: Honour Among Thieves is. It&amp;#8217;s someone telling you about their D&amp;amp;D&amp;nbsp;campaign.&lt;/p&gt;
&lt;p&gt;It&amp;#8217;s possible to rise above this, if you want to and you&amp;#8217;re really good. Dragonlance is someone telling you about their D&amp;amp;D campaign, for example. Critical Role can pull off the epic and the tragic and the hilarious in ways that fall flat when others try (because they&amp;#8217;re all very good actors with infinite charisma). But I think it&amp;#8217;s &lt;span class="caps"&gt;OK&lt;/span&gt; to not necessarily try for that. Our games are fun, even when not as dramatic or funny as films. Honour Among Thieves is the&amp;nbsp;same.&lt;/p&gt;
&lt;p&gt;I don&amp;#8217;t know if there&amp;#8217;s a market for more. I don&amp;#8217;t know how many people want to hear a secondhand story about someone else&amp;#8217;s D&amp;amp;D campaign that cost $150m. This is why I only gave it a tentative thumbs-up. But&amp;#8230; I believe that the film-makers&amp;#8217; attempt to make Honour Among Thieves be like actual D&amp;amp;D is deliberate, and I admire&amp;nbsp;that.&lt;/p&gt;
&lt;p&gt;This game of ours &lt;em&gt;is&lt;/em&gt; epic and silly and amateurish and glorious all at once, and I&amp;#8217;m happy with that. And with a film that reflects&amp;nbsp;it.&lt;/p&gt;</content><category term="General musings"></category></entry><entry><title>Ronin</title><link href="https://www.kryogenix.org/days/2023/01/30/ronin/" rel="alternate"></link><published>2023-01-30T15:44:00+00:00</published><updated>2023-01-30T15:44:00+00:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2023-01-30:/days/2023/01/30/ronin/</id><summary type="html">&lt;p&gt;In 1701, Asano Naganori, a feudal lord in Japan, was summoned to the shogun&amp;#8217;s court in Edo, the town now called Tokyo. He was a provincial chieftain, and knew little about court etiquette, and the etiquette master of the court, Kira Kozuke-no-Suke, took offence. It&amp;#8217;s not exactly clear …&lt;/p&gt;</summary><content type="html">&lt;p&gt;In 1701, Asano Naganori, a feudal lord in Japan, was summoned to the shogun&amp;#8217;s court in Edo, the town now called Tokyo. He was a provincial chieftain, and knew little about court etiquette, and the etiquette master of the court, Kira Kozuke-no-Suke, took offence. It&amp;#8217;s not exactly clear why; it&amp;#8217;s suggested that Asano didn&amp;#8217;t bribe Kira sufficiently or at all, or that Kira felt that Asano should have shown more deference. Whatever the reasoning, Kira ridiculed Asano in the shogun&amp;#8217;s presence, and Asano defended his honour by attacking Kira with a&amp;nbsp;dagger.&lt;/p&gt;
&lt;p&gt;Baring steel in the shogun&amp;#8217;s castle was a grievous offence, and the shogun commanded Asano to atone through suicide. Asano obeyed, faithful to his overlord. The shogun further commanded that Asano&amp;#8217;s retainers, over 300 samurai, were to be dispossessed and made leaderless, and forbade those retainers from taking revenge on Kira so as to prevent an escalating cycle of bloodshed. The leader of those samurai offered to divide Asano&amp;#8217;s wealth between all of them, but this was a test. Those who took him up on the offer were paid and told to leave. Forty-seven refused this offer, knowing it to be honourless, and those remaining 47 reported to the shogun that they disavowed any loyalty to their dead lord. The shogun made them rōnin, masterless samurai, and required that they disperse. Before they did, they swore a secret oath among themselves that one day they would return and avenge their master. Then each went their separate ways. These 47 rōnin immersed themselves into the population, seemingly forgoing any desire for revenge, and acting without honour to indicate that they no longer followed their code. The shogun sent spies to monitor the actions of the rōnin, to ensure that their unworthy behaviour was not a trick, but their dishonour continued for a month, two, three. For a year and a half each acted dissolutely, appallingly; drunkards and criminals all, as their swords went to rust and their reputations the&amp;nbsp;same.&lt;/p&gt;
&lt;p&gt;A year and a half later, the forty-seven rōnin gathered together again. They subdued or killed and wounded Kira&amp;#8217;s guards, they found a secret passage hidden behind a scroll, and in the hidden courtyard they found Kira and demanded that he die by suicide to satisfy their lord&amp;#8217;s honour. When the etiquette master refused, the rōnin cut off Kira&amp;#8217;s head and laid it on Asano&amp;#8217;s grave. Then they came to the shogun, surrounded by a public in awe of their actions, and confessed. The shogun considered having them executed as criminals but instead required that they too die by suicide, and the rōnin obeyed. They were buried, all except one who was not present and who lived on, in front of the tomb of their master. The tombs are a place to be visited even today, and the story of the 47 rōnin is a famous one both inside and outside&amp;nbsp;Japan.&lt;/p&gt;
&lt;p&gt;You might think: why have I been told this story? Well, there were 47 of them. 47 is a good number. It&amp;#8217;s the atomic number of silver, which is interesting stuff; the most electrically conductive metal. (During World War &lt;span class="caps"&gt;II&lt;/span&gt;, the Manhattan Project couldn&amp;#8217;t get enough copper for the miles of wiring they needed because it was going elsewhere for the war effort, so they took all the silver out of Fort Knox and melted it down to make wire instead.) It&amp;#8217;s strictly non-palindromic, which means that it&amp;#8217;s not only not a palindrome, it remains not a palindrome in any base smaller than itself. And it&amp;#8217;s how old I am&amp;nbsp;today.&lt;/p&gt;
&lt;p&gt;Yes! It&amp;#8217;s my birthday!&amp;nbsp;Hooray!&lt;/p&gt;
&lt;p&gt;&lt;img src="https://kryogenix.org/images/bday-1.jpg" alt="A glowing message board reading 'BDAY BASH 47'"&gt;&lt;/p&gt;
&lt;p&gt;I have had a good birthday this year. The family and I had delightful Greek dinner at Mythos in the Arcadian, and then yesterday a bunch of us went to the pub and had an absolute whale of an afternoon and evening, during which I became heartily intoxicated and wore a bag on my head like Lord Farrow, among other things. And I got a picture of the Solvay Conference from&amp;nbsp;Bruce.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://kryogenix.org/images/bday-3.jpg" alt="A framed picture of the Solvay Conference 1927, which is a bunch of stern-looking male physicists and Marie Curie arranged like a school photo"&gt;&lt;/p&gt;
&lt;p&gt;This year is shaping up well; I have some interesting projects coming up, including one will-be-public thing that I&amp;#8217;ve been working on and which I&amp;#8217;ll be revealing more about in due course, a much-delayed family thing is very near its end (finally!), and in general it&amp;#8217;s just gotta be better than the ongoing car crash that the last few years have been. Fingers crossed; ask me again in twelve months, anyway. I&amp;#8217;ve been writing these little posts for 21 years now (&lt;a href="https://www.kryogenix.org/days/2022/01/30/the-forty-sixers-club/"&gt;last year&lt;/a&gt; has more links) and there have been ups and downs, but this year I feel quite hopeful about the future for the first time in a while. This is good news. Happy birthday,&amp;nbsp;me.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://kryogenix.org/images/bday-2.jpg" alt="Me wearing a peach-coloured card gift bag on my head in the pub"&gt;&lt;/p&gt;</content><category term="General musings"></category></entry><entry><title>What to do about hotlinking</title><link href="https://www.kryogenix.org/days/2023/01/02/what-to-do-about-hotlinking/" rel="alternate"></link><published>2023-01-02T18:10:00+00:00</published><updated>2023-01-02T18:10:00+00:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2023-01-02:/days/2023/01/02/what-to-do-about-hotlinking/</id><summary type="html">&lt;p&gt;Hotlinking, in the context I want to discuss here, is the act of using a resource on your website by linking to it on someone else’s website. This might be any resource: a script, an image, anything that is referenced by &lt;span class="caps"&gt;URL&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;It’s a bit of an anti-social …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Hotlinking, in the context I want to discuss here, is the act of using a resource on your website by linking to it on someone else’s website. This might be any resource: a script, an image, anything that is referenced by &lt;span class="caps"&gt;URL&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;It’s a bit of an anti-social practice, to be honest. Essentially, you’re offloading the responsibility for the bandwidth of serving that resource to someone else, but it’s your site and your users who get the benefit of that. That’s not all that nice.&lt;/p&gt;
&lt;p&gt;Now, if the “other person’s website” is a &lt;span class="caps"&gt;CDN&lt;/span&gt; — that is, a site deliberately set up &lt;em&gt;in order&lt;/em&gt; to serve resources to someone else — then that’s different. There are many CDNs, and using resources served from them is not a bad thing. That’s not what I’m talking about. But if you’re including something direct from someone else’s not-a-&lt;span class="caps"&gt;CDN&lt;/span&gt; site, then… what, if anything, should the owner of that site do about it?&lt;/p&gt;
&lt;p&gt;I’ve got a fairly popular, small, piece of JavaScript: &lt;a href="https://kryogenix.org/code/browser/sorttable"&gt;sorttable.js&lt;/a&gt;, which makes an &lt;span class="caps"&gt;HTML&lt;/span&gt; table be sortable by clicking on the headers. It’s existed for a &lt;em&gt;long&lt;/em&gt; time now (the very first version was written twenty years ago!) and I get an email about it once a week or so from people looking to customise how it works or ask questions about how to do a thing they want. It’s open source, and I encourage people to use it; it’s deliberately designed to be simple&lt;sup id="sf-what-to-do-about-hotlinking-1-back"&gt;&lt;a href="#sf-what-to-do-about-hotlinking-1" class="simple-footnote" title="and will stay simple; I’d rather sorttable were simple and relatively bulletproof than comprehensive and complicated. This also explains why it’s not written in very “modern” JS style; the best assurance I have that it works in old browsers that are hard to test in now is that it DID work in them and I haven’t changed it much"&gt;1&lt;/a&gt;&lt;/sup&gt;, because the target audience is really people who aren’t hugely experienced with web development and who can add sortability to their &lt;span class="caps"&gt;HTML&lt;/span&gt; tables with a couple of lines of code. &lt;/p&gt;
&lt;p&gt;The instructions for sorttable are pretty clear: download the library, then put it in your web space and include it. However, some sites skip that first step, and instead just link directly to the copy on my website with a &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; element. Having looked at my bandwidth usage recently, this happens quite a lot&lt;sup id="sf-what-to-do-about-hotlinking-2-back"&gt;&lt;a href="#sf-what-to-do-about-hotlinking-2" class="simple-footnote" title="in the last two weeks I’ve had about 200,000 hits on sorttable.js from sites that hotlink it, which ain’t nothin’"&gt;2&lt;/a&gt;&lt;/sup&gt;, and on some quite high-profile sites. I’m not going to name and shame anyone&lt;sup id="sf-what-to-do-about-hotlinking-3-back"&gt;&lt;a href="#sf-what-to-do-about-hotlinking-3" class="simple-footnote" title="yet, at least, so don’t ask"&gt;3&lt;/a&gt;&lt;/sup&gt;, but I’d quite like to encourage people to not do that, if there’s a way to do it. So I’ve been thinking about ways that I might discourage hotlinking the script directly, while doing so in a reasonable and humane fashion. I’m also interested in suggestions: hit me up on Mastodon at &lt;a href="https://mastodon.social/@sil"&gt;@sil@mastodon.social&lt;/a&gt; or Twitter&lt;sup id="sf-what-to-do-about-hotlinking-4-back"&gt;&lt;a href="#sf-what-to-do-about-hotlinking-4" class="simple-footnote" title="if you must"&gt;4&lt;/a&gt;&lt;/sup&gt; as @sil.&lt;/p&gt;
&lt;h2&gt;Move the script to a different &lt;span class="caps"&gt;URL&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;This is the obvious thing to do: I move the script and update my page to link to the new location, so anyone coming to my page to get the script will be wholly unaffected and unaware I did it. I do not want to do this, for two big reasons: it’s kicking the can down the road, and it’s unfriendly.&lt;/p&gt;
&lt;p&gt;It’s can-kicking because it doesn’t actually solve the problem: if I do nothing else to discourage the practice of hotlinking, then a few years from now I’ll have people hotlinking to the new location and I’ll have to do it again. &lt;span class="caps"&gt;OK&lt;/span&gt;, that’s not exactly a lot of work, but it’s still not a great answer.&lt;/p&gt;
&lt;p&gt;But more importantly, it’s unfriendly. If I do that, I’ll be deliberately breaking everyone who’s hotlinking the script. You might think that they deserve it, but it’s not actually them who feel the effect; it’s their users. And their users didn’t do it. One of the big motives behind the web’s general underlying principle of “don’t break the web” is that it’s not reasonable to punish a site’s users for the bad actions of the site’s creators. This applies to browsers, to libraries, to websites, the whole lot. I would like to find a less harsh method than this.&lt;/p&gt;
&lt;h2&gt;Move the script to a different &lt;em&gt;dynamic&lt;/em&gt; &lt;span class="caps"&gt;URL&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;That is: do the above, but link to a &lt;span class="caps"&gt;URL&lt;/span&gt; which changes automatically every month or every minute or something. The reason that I don’t want to do this (apart from the unfriendly one from above, which still applies even though this fixes the can-kicking) is that this requires server collusion; I’d need to make my main page be dynamic in some way, so that links to the script also update along with the script name change. This involves faffery with cron jobs, or turning the existing static &lt;span class="caps"&gt;HTML&lt;/span&gt; page into a server-generated page, both of which are annoying. I know how to do this, but it feels like an inelegant solution; this isn’t really a technical problem, it’s a social one, where developers are doing an anti-social thing. Attempting to solve social problems with technical measures is pretty much always a bad idea, and so it is in this case.&lt;/p&gt;
&lt;h2&gt;Contact the highest-profile site developers about it&lt;/h2&gt;
&lt;p&gt;I’m leaning in this direction. I’m &lt;span class="caps"&gt;OK&lt;/span&gt; with smaller sites hotlinking (well, I’m not really, but I’m prepared to handwave it; I made the script and made it easy to use exactly to help people, and if a small part of that general donation to the universe includes me providing bandwidth for it, then I can live with that). The issue here is that it’s not always easy to tell who those heavy-bandwidth-consuming sites &lt;em&gt;are&lt;/em&gt;. It relies on the referrer being provided, which it isn’t always. It’s also a bit more work on my part, because I would want to send an email saying “hey, Site X developers, you’re hotlinking my script as you can see on page sitex.example.com/sometable.html and it would be nice if you didn’t do that”, but I have no good way of identifying those pages; the document referrer isn’t always that specific. If I send an email saying “you’re hotlinking my script somewhere, who knows where, please don’t do that” then the site developers are quite likely to put this request at the very bottom of their list, and I don’t blame them.&lt;/p&gt;
&lt;h2&gt;Move the script and maliciously break the old one&lt;/h2&gt;
&lt;p&gt;This is: I move the script somewhere else and update my links, and then I change the previous &lt;span class="caps"&gt;URL&lt;/span&gt; to be the same script but it does something like barf a complaint into the console log, or (in extreme cases based on suggestions I’ve had) pops up an alert box or does something equally obnoxious. Obviously, I don’t wanna do this.&lt;/p&gt;
&lt;h2&gt;Legal-ish things&lt;/h2&gt;
&lt;p&gt;That is: contact the highest profile users, but instead of being conciliatory, be threatening. “You’re hotlinking this, stop doing it, or pay the Hotlink Licence Fee which is one cent per user per day” or similar. I think the people who suggest this sort of thing (and the previous malicious approach) must have had another website do something terrible to them in a previous life or something and now are out for revenge. I liked John Wick as much as the next poorly-socialised revenge-fantasy tech nerd, but he’s not a good model for collaborative software development, y’know?&lt;/p&gt;
&lt;h2&gt;Put the page (or whole site) behind a &lt;span class="caps"&gt;CDN&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;I could put the site behind Cloudflare (or perhaps a better, less troubling &lt;span class="caps"&gt;CDN&lt;/span&gt;) and then not worry about it; it’s not &lt;em&gt;my&lt;/em&gt; bandwidth then, it’s theirs, and they’re fine with it. This used to be the case, but recently I moved web hosts&lt;sup id="sf-what-to-do-about-hotlinking-5-back"&gt;&lt;a href="#sf-what-to-do-about-hotlinking-5" class="simple-footnote" title="to the excellent Mythic Beasts, who are way better than the previous hosts"&gt;5&lt;/a&gt;&lt;/sup&gt; and stepped away from Cloudflare in so doing. While this would work… it feels like giving up, a bit. I’m not actually solving the problem, I’m just giving it to someone else who is &lt;span class="caps"&gt;OK&lt;/span&gt; with it.&lt;/p&gt;
&lt;h2&gt;Live with it&lt;/h2&gt;
&lt;p&gt;This isn’t overrunning my bandwidth allocation or anything. I’m not actually &lt;em&gt;affected&lt;/em&gt; by this. My complaint isn’t important; it’s more a sort of distaste for the process. I’d like to make this better, rather than ignoring it, even if ignoring it doesn’t mean much, as long as I’m not put to more inconvenience by fixing it. We want things to be better, after all, not simply tolerable.&lt;/p&gt;
&lt;p&gt;So… what do you think, gentle reader? What would you do about it? Answers on a postcard.&lt;/p&gt;&lt;ol class="simple-footnotes"&gt;&lt;li id="sf-what-to-do-about-hotlinking-1"&gt;and will stay simple; I’d rather sorttable were simple and relatively bulletproof than comprehensive and complicated. This also explains why it’s not written in very “modern” &lt;span class="caps"&gt;JS&lt;/span&gt; style; the best assurance I have that it works in old browsers that are hard to test in now is that it &lt;span class="caps"&gt;DID&lt;/span&gt; work in them and I haven’t changed it much &lt;a href="#sf-what-to-do-about-hotlinking-1-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-what-to-do-about-hotlinking-2"&gt;in the last two weeks I’ve had about 200,000 hits on sorttable.js from sites that hotlink it, which ain’t nothin’ &lt;a href="#sf-what-to-do-about-hotlinking-2-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-what-to-do-about-hotlinking-3"&gt;yet, at least, so don’t ask &lt;a href="#sf-what-to-do-about-hotlinking-3-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-what-to-do-about-hotlinking-4"&gt;if you must &lt;a href="#sf-what-to-do-about-hotlinking-4-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-what-to-do-about-hotlinking-5"&gt;to the excellent &lt;a href="https://www.mythic-beasts.com/hosting"&gt;Mythic Beasts&lt;/a&gt;, who are way better than the previous hosts &lt;a href="#sf-what-to-do-about-hotlinking-5-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;</content><category term="General musings"></category></entry><entry><title>How I set up a Twitter archive with Tweetback</title><link href="https://www.kryogenix.org/days/2022/12/19/how-i-set-up-a-twitter-archive-with-tweetback/" rel="alternate"></link><published>2022-12-19T10:40:00+00:00</published><updated>2022-12-19T10:40:00+00:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2022-12-19:/days/2022/12/19/how-i-set-up-a-twitter-archive-with-tweetback/</id><summary type="html">&lt;p&gt;Twitter currently has problems. Well, one specific problem, which is the bloke who bought it. My solution to this problem has been to move to Mastodon (&lt;a href="https://mastodon.social/@sil"&gt;@sil@mastodon.social&lt;/a&gt; if you want to do the same), but I&amp;#8217;ve invested fifteen years of my life providing twitter.com with free …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Twitter currently has problems. Well, one specific problem, which is the bloke who bought it. My solution to this problem has been to move to Mastodon (&lt;a href="https://mastodon.social/@sil"&gt;@sil@mastodon.social&lt;/a&gt; if you want to do the same), but I&amp;#8217;ve invested fifteen years of my life providing twitter.com with free content so I don&amp;#8217;t really want it to go away. Since there&amp;#8217;s a chance that the whole site might vanish, or that it continues on its current journey until I don&amp;#8217;t even want my name associated with it any more, it makes sense to have a backup. And obviously, I don&amp;#8217;t want all that lovely writing to disappear from the web (how would you all cope without me complaining about some random pub&amp;#8217;s music in 2011?!), so I wanted to have that backup published somewhere I control&amp;#8230; by which I mean my own&amp;nbsp;website.&lt;/p&gt;
&lt;p&gt;So, it would be nice to be able to download a list of all my tweets, and then turn that into some sort of website so it&amp;#8217;s all still available and published by&amp;nbsp;me.&lt;/p&gt;
&lt;p&gt;Fortunately, &lt;a href="https://www.zachleat.com/"&gt;Zach Leatherman&lt;/a&gt; came to save us by building a tool, &lt;a href="https://github.com/tweetback/tweetback"&gt;Tweetback&lt;/a&gt;, which does a lot of the heavy lifting on this. Nice one, that man. Here I&amp;#8217;ll describe how I used Tweetback to set up &lt;a href="https://kryogenix.org/twitter"&gt;my own personal Twitter archive&lt;/a&gt;. This is unavoidably a bit of a developer-ish process, involving the Terminal and so on; if you&amp;#8217;re not at least a little comfortable with doing that, this might not be for&amp;nbsp;you.&lt;/p&gt;
&lt;h1&gt;Step 1: get a backup from&amp;nbsp;Twitter&lt;/h1&gt;
&lt;p&gt;This part is mandatory. Twitter graciously permit you to download a big list of all the tweets you&amp;#8217;ve given them over the years, and you&amp;#8217;ll need it for this. As they describe in their &lt;a href="https://help.twitter.com/en/managing-your-account/how-to-download-your-twitter-archive"&gt;help page&lt;/a&gt;, go to your Twitter account settings and choose &lt;strong&gt;Your account &amp;gt; Download an archive of your data&lt;/strong&gt;. You&amp;#8217;ll have to confirm your identity and then say &lt;strong&gt;Request data&lt;/strong&gt;. They then go away and start constructing an archive of all your Twitter stuff. This can take a couple of days; they send you an email when it&amp;#8217;s done, and you can follow the link in that email to download a zip file. This is your Twitter backup; it contains all your tweets (and some other stuff). Stash it somewhere; you&amp;#8217;ll need a file from it&amp;nbsp;shortly.&lt;/p&gt;
&lt;h1&gt;Step 2: get the &lt;a href="https://github.com/tweetback/tweetback"&gt;Tweetback&lt;/a&gt;&amp;nbsp;code&lt;/h1&gt;
&lt;p&gt;You&amp;#8217;ll need both node.js and git installed to do this. If you don&amp;#8217;t have node.js, go to &lt;a href="https://nodejs.org"&gt;nodejs.org&lt;/a&gt; and follow their instructions for how to download and install it for your computer. (This process can be fiddly; sorry about that. I suspect that most people reading this will already have node installed, but if you don&amp;#8217;t, hopefully you can manage it.) You&amp;#8217;ll also need git installed: &lt;a href="https://docs.github.com/en/get-started/quickstart/set-up-git"&gt;Github have some instructions on how to install git&lt;/a&gt; or Github Desktop, which should explain how to do this stuff if you don&amp;#8217;t already have it set&amp;nbsp;up.&lt;/p&gt;
&lt;p&gt;Now, you need to clone the &lt;a href="https://github.com/tweetback/tweetback"&gt;Tweetback repository&lt;/a&gt; from Github. On the command line, this looks like &lt;code&gt;git clone https://github.com/tweetback/tweetback.git&lt;/code&gt;; if you&amp;#8217;re using Github Desktop, follow their instructions to &lt;a href="https://docs.github.com/en/desktop/contributing-and-collaborating-using-github-desktop/adding-and-cloning-repositories/cloning-and-forking-repositories-from-github-desktop"&gt;clone a repository&lt;/a&gt;. This should give you the Tweetback code, in a folder on your computer. Make a note of where that folder&amp;nbsp;is.&lt;/p&gt;
&lt;h1&gt;Step 3: install the Tweetback&amp;nbsp;code&lt;/h1&gt;
&lt;p&gt;Open a Terminal on your machine and &lt;code&gt;cd&lt;/code&gt; into the Tweetback folder, wherever you put it. Now, run &lt;code&gt;npm install&lt;/code&gt; to install all of Tweetback&amp;#8217;s dependencies. Since you have node.js installed from above, this ought to just work. If it doesn&amp;#8217;t&amp;#8230; you get to debug a bit. Sorry about that. This should end up looking something like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;npm&lt;span class="w"&gt; &lt;/span&gt;install
npm&lt;span class="w"&gt; &lt;/span&gt;WARN&lt;span class="w"&gt; &lt;/span&gt;deprecated&lt;span class="w"&gt; &lt;/span&gt;@npmcli/move-file@1.1.2:&lt;span class="w"&gt; &lt;/span&gt;This&lt;span class="w"&gt; &lt;/span&gt;functionality&lt;span class="w"&gt; &lt;/span&gt;has&lt;span class="w"&gt; &lt;/span&gt;been&lt;span class="w"&gt; &lt;/span&gt;moved&lt;span class="w"&gt; &lt;/span&gt;to&lt;span class="w"&gt; &lt;/span&gt;@npmcli/fs

added&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;347&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;packages,&lt;span class="w"&gt; &lt;/span&gt;and&lt;span class="w"&gt; &lt;/span&gt;audited&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;348&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;packages&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;30s

&lt;span class="m"&gt;52&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;packages&lt;span class="w"&gt; &lt;/span&gt;are&lt;span class="w"&gt; &lt;/span&gt;looking&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;funding
&lt;span class="w"&gt;  &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;npm&lt;span class="w"&gt; &lt;/span&gt;fund&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;details

found&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;vulnerabilities
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Step 4: configure Tweetback with your tweet&amp;nbsp;archive&lt;/h1&gt;
&lt;p&gt;From here, you&amp;#8217;re following Tweetback&amp;#8217;s own &lt;span class="caps"&gt;README&lt;/span&gt; instructions: they&amp;#8217;re online at &lt;a href="https://github.com/tweetback/tweetback#usage"&gt;https://github.com/tweetback/tweetback#usage&lt;/a&gt; and also are in the &lt;span class="caps"&gt;README&lt;/span&gt; file in your current&amp;nbsp;directory.&lt;/p&gt;
&lt;p&gt;Open up the zip file you downloaded from Twitter, and get the &lt;code&gt;data/tweets.js&lt;/code&gt; file from it. Put that in the &lt;code&gt;database&lt;/code&gt; folder in your Tweetback folder, then edit that file to change &lt;code&gt;window.YTD.tweet.part0&lt;/code&gt; on the first line to &lt;code&gt;module.exports&lt;/code&gt;, as the &lt;span class="caps"&gt;README&lt;/span&gt; says. This means that your &lt;code&gt;database/tweets.js&lt;/code&gt; file will now have the first couple of lines look like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;exports&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;tweet&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now, run &lt;code&gt;npm run import&lt;/code&gt;. This will go through your &lt;code&gt;tweets.js&lt;/code&gt; file and load it all into a database, so it can be more easily read later on. You only need to do this step once. This will print a bunch of lines that look like &lt;code&gt;{ existingRecordsFound: 0, missingTweets: 122 }&lt;/code&gt;, and then a bunch of lines that look like &lt;code&gt;Finished count { count: 116 }&lt;/code&gt;, and then it&amp;#8217;ll finish. This should be &lt;em&gt;relatively&lt;/em&gt; quick, but if you&amp;#8217;ve got a lot of tweets (I have 68,000!) then it might take a little while. Get yourself a cup of tea and a couple of biscuits and it&amp;#8217;ll be done when you&amp;#8217;ve poured&amp;nbsp;it.&lt;/p&gt;
&lt;h1&gt;Step 5: Configure a subdirectory&amp;nbsp;(optional)&lt;/h1&gt;
&lt;p&gt;If you&amp;#8217;re setting up your own (sub)domain for your twitter archive, so it&amp;#8217;ll be at the root of the website (so, &lt;code&gt;https://twitter.example.com&lt;/code&gt; or whatever) then you can skip this step. However, if you&amp;#8217;re going to put your archive in its own directory, so it&amp;#8217;s &lt;em&gt;not&lt;/em&gt; at the root (which I did, for example, at &lt;a href="https://kryogenix.org/twitter/"&gt;kryogenix.org/twitter&lt;/a&gt;), then you need to tell your setup about&amp;nbsp;that.&lt;/p&gt;
&lt;p&gt;To do this, edit the file &lt;code&gt;eleventy.config.js&lt;/code&gt;, and at the end, before the closing &lt;code&gt;}&lt;/code&gt;, add a new line, so the end of the file looks like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;eleventyConfig&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addPlugin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;EleventyHtmlBasePlugin&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;pathPrefix&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/twitter/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The string &lt;code&gt;"/twitter/"&lt;/code&gt; should be whatever you want the path to the root of your Twitter archive to be, so if you&amp;#8217;re going to put it at &lt;code&gt;mywebsite.example.com/my-twitter-archive&lt;/code&gt;, set &lt;code&gt;pathPrefix&lt;/code&gt; to be &lt;code&gt;"/my-twitter-archive"&lt;/code&gt;. This is only a path, not a full &lt;span class="caps"&gt;URL&lt;/span&gt;; you do not need to fill in the domain where you&amp;#8217;ll be hosting this&amp;nbsp;here.&lt;/p&gt;
&lt;h1&gt;Step 6: add&amp;nbsp;metadata&lt;/h1&gt;
&lt;p&gt;As the Tweetback &lt;span class="caps"&gt;README&lt;/span&gt; describes, edit the file &lt;code&gt;_data/metadata.js&lt;/code&gt;. You&amp;#8217;ll want to change three values in here: &lt;code&gt;username&lt;/code&gt;, &lt;code&gt;homeLabel&lt;/code&gt;, and &lt;code&gt;homeURL&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;username&lt;/code&gt; is your Twitter username. Mine is &lt;code&gt;sil&lt;/code&gt;: yours isn&amp;#8217;t. Don&amp;#8217;t include the &lt;code&gt;@&lt;/code&gt; at the&amp;nbsp;beginning.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;homeLabel&lt;/code&gt; is the thing that appears in the top corner of your Twitter archive once generated; it will be a link to your own homepage. (Note: &lt;em&gt;not&lt;/em&gt; the homepage of this Twitter archive! This will be the text of a link which takes you out of the Twitter archive and to your own&amp;nbsp;home.)&lt;/p&gt;
&lt;p&gt;&lt;code&gt;homeURL&lt;/code&gt; is the full &lt;span class="caps"&gt;URL&lt;/span&gt; to your homepage. (This is &amp;#8220;https://kryogenix.org/&amp;#8221; for me, for example. It is the &lt;span class="caps"&gt;URL&lt;/span&gt; that &lt;code&gt;homeLabel&lt;/code&gt; links&amp;nbsp;to.)&lt;/p&gt;
&lt;p&gt;&lt;img src="https://kryogenix.org/random/tweetback-homelabel.png" alt=""&gt;&lt;/p&gt;
&lt;h1&gt;Step 7: (drum roll, please!) Build the&amp;nbsp;site&lt;/h1&gt;
&lt;p&gt;&lt;span class="caps"&gt;OK&lt;/span&gt;. Now you&amp;#8217;ve done all the setup. This step actually takes all of that and builds a website from all your&amp;nbsp;tweets.&lt;/p&gt;
&lt;p&gt;Run &lt;code&gt;npm run build&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you&amp;#8217;ve got a lot of tweets, this can take a &lt;em&gt;long&lt;/em&gt; time. It took me a couple of hours, I think, the first time I ran it. Subsequent runs take a lot less time (a couple of minutes for me, maybe even shorter for you if you&amp;#8217;re less mouthy on Twitter), but the first run takes &lt;em&gt;ages&lt;/em&gt; because it has to fetch all the images for all the tweets you&amp;#8217;ve ever written. You&amp;#8217;ll want a second cup of tea here, and perhaps&amp;nbsp;dinner.&lt;/p&gt;
&lt;p&gt;It should look something like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;npm&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;build

&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;tweetback@1.0.0&lt;span class="w"&gt; &lt;/span&gt;build
&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;npx&lt;span class="w"&gt; &lt;/span&gt;@11ty/eleventy&lt;span class="w"&gt; &lt;/span&gt;--quiet

&lt;span class="o"&gt;[&lt;/span&gt;11ty&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Copied&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1868&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;files&lt;span class="w"&gt; &lt;/span&gt;/&lt;span class="w"&gt; &lt;/span&gt;Wrote&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;68158&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;files&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;248&lt;/span&gt;.58&lt;span class="w"&gt; &lt;/span&gt;seconds&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.6ms&lt;span class="w"&gt; &lt;/span&gt;each,&lt;span class="w"&gt; &lt;/span&gt;v2.0.0-canary.18&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You may get errors in here about being unable to fetch URLs (&lt;code&gt;Image request error Bad response for https://pbs.twimg.com/media/C1VJJUVXEAE3VGE.jpg (404): Not Found&lt;/code&gt; and the like); this is because some Tweets link to images that aren&amp;#8217;t there any more. There&amp;#8217;s not a lot you can do about this, but it doesn&amp;#8217;t stop the rest of the site&amp;nbsp;building.&lt;/p&gt;
&lt;p&gt;Once this is all done, you should have a directory called &lt;code&gt;_site&lt;/code&gt;, which is a website containing your Twitter archive! Hooray! Now you publish that directory, however you choose: copy it up to your website, push it to &lt;a href="https://github.com/tweetback/tweetback/blob/main/docs/deploy-with-github-pages.md"&gt;github pages&lt;/a&gt; or Netlify or whatever. You only need the contents of the &lt;code&gt;_site&lt;/code&gt; directory; that&amp;#8217;s your whole Twitter archive website, completely self-contained; all the other stuff is only used for generating the archive website, not for running it once it&amp;#8217;s&amp;nbsp;generated.&lt;/p&gt;
&lt;h1&gt;Step 8: updating the site with newer tweets&amp;nbsp;(optional)&lt;/h1&gt;
&lt;p&gt;If you&amp;#8217;re still using Twitter, you may post more Tweets after your downloadable archive was generated. If so, it&amp;#8217;d be nice to update the archive with the contents of those tweets without having to request a full archive from Twitter and wait two days. Fortunately, this is possible. Unfortunately, you gotta do some hoop-jumping to get&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;You see, to do this, you need access to the Twitter &lt;span class="caps"&gt;API&lt;/span&gt;. In the old days, people built websites with an &lt;span class="caps"&gt;API&lt;/span&gt; because they wanted to encourage others to interact with that website programmatically as well as in a browser: you built an ecosystem, right? But Twitter are not like that; they don&amp;#8217;t really want you to interact with their stuff unless they like what you&amp;#8217;re doing. So you have to apply for permission to be a Twitter developer in order to use the &lt;span class="caps"&gt;API&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;To do this, as the Tweetback readme says, you will need a Twitter bearer token. To get one of those, you need to be a Twitter developer, and to be that, you have to fill in a bunch of forms and ask for permission and be manually reviewed. Twitter&amp;#8217;s documentation explains about &lt;a href="https://developer.twitter.com/en/docs/authentication/oauth-2-0/bearer-tokens"&gt;bearer tokens&lt;/a&gt;, and explains that you need to sign up for a Twitter developer account to get them. Go ahead and do that. This is an annoying process where they ask a bunch of questions about what you plan to do with the Twitter &lt;span class="caps"&gt;API&lt;/span&gt;, and then you wait until someone manually reviews your answers and decides whether to grant you access or not, and possibly makes you clarify your answers to questions. I have no good suggestions here; go through the process and wait.&amp;nbsp;Sorry.&lt;/p&gt;
&lt;p&gt;Once you are a Twitter developer, create an app, and then get its bearer token. You only get this once, so be sure to make a note of it. In a clear allusion to the delight that this whole process brings to users, it probably will begin by screaming &lt;code&gt;AAAAAAAAAAAAAAA&lt;/code&gt; and then look like a bunch of incomprehensible&amp;nbsp;gibberish.&lt;/p&gt;
&lt;p&gt;Now to pull in new data,&amp;nbsp;run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;TWITTER_BEARER_TOKEN&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;AAAAAAAAAAAAAAAAAAq3874nh93q&lt;span class="w"&gt; &lt;/span&gt;npm&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;fetch-new-data
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;(substituting in the value of your token, of course, which will be&amp;nbsp;longer.)&lt;/p&gt;
&lt;p&gt;This will fetch any tweets that aren&amp;#8217;t in the database because you made them since! And then run &lt;code&gt;npm run build&lt;/code&gt; again to rebuild the &lt;code&gt;_site&lt;/code&gt; directory, and re-publish it&amp;nbsp;all.&lt;/p&gt;
&lt;p&gt;I personally run these steps (&lt;code&gt;fetch-new-data&lt;/code&gt;, then &lt;code&gt;build&lt;/code&gt;, then publish) daily in a cron job, which runs a script with contents&amp;nbsp;(approximately):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;dirname&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$0&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Begin&lt;span class="w"&gt; &lt;/span&gt;publish&lt;span class="w"&gt; &lt;/span&gt;at&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date&lt;span class="k"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Updating&lt;span class="w"&gt; &lt;/span&gt;Twitter&lt;span class="w"&gt; &lt;/span&gt;archive
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;========================&lt;/span&gt;
&lt;span class="nv"&gt;TWITTER_BEARER_TOKEN&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;AAAAAAAAAAAAAA9mh8j9808jhey9w34cvj3g3&lt;span class="w"&gt; &lt;/span&gt;npm&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;fetch-new-data&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Updating&lt;span class="w"&gt; &lt;/span&gt;site&lt;span class="w"&gt; &lt;/span&gt;from&lt;span class="w"&gt; &lt;/span&gt;archive
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==========================&lt;/span&gt;
npm&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;build&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Publishing&lt;span class="w"&gt; &lt;/span&gt;site
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;===============&lt;/span&gt;
rsync&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ssh&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-az&lt;span class="w"&gt; &lt;/span&gt;_site/&lt;span class="w"&gt; &lt;/span&gt;kryogenix.org:public_html/twitter&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Finish&lt;span class="w"&gt; &lt;/span&gt;publish&lt;span class="w"&gt; &lt;/span&gt;at&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;but how you publish and rebuild, and how often you do that, is of course up to&amp;nbsp;you.&lt;/p&gt;
&lt;h1&gt;Step 9: improve the archive (optional, but&amp;nbsp;good)&lt;/h1&gt;
&lt;p&gt;What Tweetback actually &lt;em&gt;does&lt;/em&gt; is use your twitter backup to build an &lt;a href="https://www.11ty.dev/"&gt;11ty&lt;/a&gt; static website. (This is not all that surprising, since 11ty is also Zach&amp;#8217;s static site builder.) This means that if you&amp;#8217;re into 11ty you could make the archive better and more comprehensive by adding stuff. There are already some neat graphs of most popular tweets, most recent tweets, the emoji you use a lot (sigh) and so on; if you find things that you wish that your Twitter archive contained, &lt;a href="https://github.com/tweetback/tweetback/issues"&gt;file an issue&lt;/a&gt; with Tweetback, or better still write the change and submit it back so everyone gets&amp;nbsp;it!&lt;/p&gt;
&lt;h1&gt;Step 10: add yourself to the list of people using the archive (optional, but you know you&amp;nbsp;wanna)&lt;/h1&gt;
&lt;p&gt;Go to &lt;a href="https://github.com/tweetback/tweetback-canonical"&gt;tweetback/tweetback-canonical&lt;/a&gt; and add yourself to the &lt;code&gt;mapping.js&lt;/code&gt; file. What&amp;#8217;s neat about this is that that file is used by tweetback itself. This means that if someone else with a Tweetback archive has a tweet which links to one of &lt;em&gt;your&lt;/em&gt; Tweets, now their archive will link to your archive directly instead! It&amp;#8217;s not just a bunch of separate sites, it&amp;#8217;s a bunch of sites all of which are connected! Lots of connections between sites without any central authority! We could call this a collection of connections. Or a pile of connections. Or&amp;#8230; a &lt;em&gt;web&lt;/em&gt;!&lt;/p&gt;
&lt;p&gt;That&amp;#8217;s a good idea. Someone should do something with that&amp;nbsp;concept.&lt;/p&gt;
&lt;h1&gt;Step 11: big hugs for&amp;nbsp;Zach&lt;/h1&gt;
&lt;p&gt;You may, or may not, want to get off Twitter. Maybe you&amp;#8217;re looking to get as far away as possible; maybe you just don&amp;#8217;t want to lose the years of investment you&amp;#8217;ve put in. But it&amp;#8217;s never a bad thing to have your data under your control when you can. Tweetback helps make that happen. Cheers to Zach and the other contributors for creating it, so the rest of us didn&amp;#8217;t have to. Tell them thank&amp;nbsp;you.&lt;/p&gt;</content><category term="General musings"></category></entry><entry><title>Transferring to a new phone network, 2022 edition</title><link href="https://www.kryogenix.org/days/2022/12/06/transferring-to-a-new-phone-network-2022-edition/" rel="alternate"></link><published>2022-12-06T15:37:00+00:00</published><updated>2022-12-06T15:37:00+00:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2022-12-06:/days/2022/12/06/transferring-to-a-new-phone-network-2022-edition/</id><summary type="html">&lt;p&gt;Some posts are written so there’s an audience. Some are written to be informative, or amusing. And some are literally just documentation for me which nobody else will care about. This is one of those.&lt;/p&gt;
&lt;p&gt;I’ve moved phone network. I’ve been with Three for years, but they …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Some posts are written so there’s an audience. Some are written to be informative, or amusing. And some are literally just documentation for me which nobody else will care about. This is one of those.&lt;/p&gt;
&lt;p&gt;I’ve moved phone network. I’ve been with Three for years, but they came up with an extremely annoying new tactic, and so they must be punished. You see, I had an account with &lt;span class="caps"&gt;4GB&lt;/span&gt; of data usage per month for about £15pm, and occasionally I’d go over that; a couple of times a year at most. That’s &lt;span class="caps"&gt;OK&lt;/span&gt;: I don’t mind buying some sort of “data booster” thing to give me an extra gig for the last few days before the next bill; seems reasonable.&lt;/p&gt;
&lt;p&gt;But Three changed things. Now, you see, you can’t buy a booster to give yourself a bit of data until the end of the month. No, you have to buy a booster which gives you extra data &lt;em&gt;every&lt;/em&gt; month, and then three days later when you’re in the new month, cancel it. There’s no way to just get the data for now.&lt;sup id="sf-transferring-to-a-new-phone-network-2022-edition-1-back"&gt;&lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-1" class="simple-footnote" title="Well, there is: you can spend twenty actual pounds to get unlimited data until the end of the month. But that’s loads of money."&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;This is aggressively customer-hostile. There’s literally no reason to do this other than to screw people who forget to cancel it. Sure, have an option to buy a “permanent top-up”, no arguments with that. But there should also be an option to buy a temporary top-up, just once! There used to be!&lt;/p&gt;
&lt;p&gt;I was vaguely annoyed with Three for general reasons anyway — they got rid of free &lt;span class="caps"&gt;EU&lt;/span&gt; roaming, they are unhelpful when you ask questions, etc — and so I was vaguely considering moving away regardless. But this was the straw that broke the camel’s back.&lt;sup id="sf-transferring-to-a-new-phone-network-2022-edition-2-back"&gt;&lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-2" class="simple-footnote" title="is there an actual camel whose back was broken in some fable somewhere? this is a terribly unfortunate metaphor!"&gt;2&lt;/a&gt;&lt;/sup&gt; So… time to look around.&lt;/p&gt;
&lt;p&gt;I asked the Mastodon gang for suggestions, and I got lots, which is useful. Thank you for that, all.&lt;/p&gt;
&lt;p&gt;The main three I got were Smarty, iD, and Giffgaff. Smarty are Three themselves in a posh frock, so that’s no good; the whole point of bailing is to leave Three. Giffgaff are great, and I’ve been hearing about their greatness for years, not least from &lt;a href="https://popey.com"&gt;popey&lt;/a&gt;, but they don’t do WiFi Calling, so they’re a no-no.&lt;sup id="sf-transferring-to-a-new-phone-network-2022-edition-3-back"&gt;&lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-3" class="simple-footnote" title="Coverage in my flat — for any network — is rubbish. So wifi calling is a hard requirement. I don’t know why this is — I’m in the city! Maybe the walls all have copper wiring in them like the room that Elodin was imprisoned in, I don’t know"&gt;3&lt;/a&gt;&lt;/sup&gt; And &lt;a href="https://www.idmobile.co.uk/"&gt;iD mobile&lt;/a&gt; looked pretty good. (All these new “&lt;span class="caps"&gt;MVNO&lt;/span&gt;” types of thing seem quite a lot cheaper than “traditional” phone operators. Don’t know why. Hooray, though.)&lt;/p&gt;
&lt;p&gt;So off I went to iD, and signed up for a 30-day rolling &lt;span class="caps"&gt;SIM&lt;/span&gt;-only deal&lt;sup id="sf-transferring-to-a-new-phone-network-2022-edition-4-back"&gt;&lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-4" class="simple-footnote" title="I always buy my own phones, so I only ever need a SIM, and I don’t like being locked in"&gt;4&lt;/a&gt;&lt;/sup&gt;. £7 per month. &lt;span class="caps"&gt;12GB&lt;/span&gt; of data. I mean, crikey, that’s quite a lot better than before.&lt;/p&gt;
&lt;p&gt;I need to keep my phone number, though, so I had to transfer it between networks. To do this, you need a “&lt;span class="caps"&gt;PAC&lt;/span&gt;” code from your old network, and you supply it to the new one. All my experience of dealing with phone operators is from the Old Days, and back then you had to grovel to get a &lt;span class="caps"&gt;PAC&lt;/span&gt; and your current phone network would do their best to talk you out of it. Fortunately, the iron hand of government regulation has put a stop to these sorts of shenanigans now (the &lt;span class="caps"&gt;UK&lt;/span&gt; has a &lt;a href="https://www.gov.uk/government/organisations/competition-and-markets-authority"&gt;good tech regulator, the Competition and Markets Authority&lt;/a&gt;&lt;sup id="sf-transferring-to-a-new-phone-network-2022-edition-5-back"&gt;&lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-5" class="simple-footnote" title="we, meaning Open Web Advocacy, have worked extensively with the CMA (and other regulators around the world) about assisting and requiring mobile phone manufacturers to provide browser diversity — that is, to make it so you can use web apps on your phone that are as capable as platform-specific apps, and the CMA are great"&gt;5&lt;/a&gt;&lt;/sup&gt;) and you can get a &lt;span class="caps"&gt;PAC&lt;/span&gt;, no questions asked, by sending an &lt;span class="caps"&gt;SMS&lt;/span&gt; with content “&lt;span class="caps"&gt;PAC&lt;/span&gt;” to 65075. Hooray. So, iD mobile sent me a new &lt;span class="caps"&gt;SIM&lt;/span&gt; in the post, and I got the &lt;span class="caps"&gt;PAC&lt;/span&gt; from Three, and then I told iD about the &lt;span class="caps"&gt;PAC&lt;/span&gt; (on the website: no person required), and they said (on the website), ok, we’ll do the switch in a couple of working days.&lt;/p&gt;
&lt;p&gt;However, the &lt;span class="caps"&gt;SIM&lt;/span&gt; has some temporary number on it. Today, my Three account stopped working (indicating that Three had received and handled their end of the deal by turning off my account), and so I dutifully popped out the Three &lt;span class="caps"&gt;SIM&lt;/span&gt; from my phone&lt;sup id="sf-transferring-to-a-new-phone-network-2022-edition-6-back"&gt;&lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-6" class="simple-footnote" title="removing a SIM tray is harder than it looks when you don’t wear earrings. I had to search everywhere to find one of those little SIM tools"&gt;6&lt;/a&gt;&lt;/sup&gt; and put in the new one.&lt;/p&gt;
&lt;p&gt;But! Alas! My phone thought that it had the temporary number!&lt;/p&gt;
&lt;p&gt;I think this is because Three process their (departing) end, there’s an interregnum, and then iD process their (arriving) end, and I was in the interregnum. I do not know what would have happened if someone rang my actual phone number during this period. Hopefully nobody did. I waited a few hours — the data connection worked fine on my phone, but it had the wrong number — and then I turned the phone off and left it off for ten minutes or so. Then… I turned it back on, and… pow! My proper number is mine again! Hooray!&lt;/p&gt;
&lt;p&gt;That ought to have been the end of it. However, I have an Apple phone. So, in Settings &amp;gt; Phone &amp;gt; My Number, it was still reading the temporary number. Similarly, in Settings &amp;gt; Messages &amp;gt; iMessage &amp;gt; Send and Receive, it was also still reading the temporary number.&lt;/p&gt;
&lt;p&gt;How inconvenient.&lt;/p&gt;
&lt;p&gt;Some combination of the following fixed that. I’m not sure exactly what is required to fix it: I did all this, some more than once, in some random order, and now it seems &lt;span class="caps"&gt;OK&lt;/span&gt;: powering the phone off and on again; disabling iMessage and re-enabling it; disabling iMessage, waiting a few minutes, and then re-enabling it; disabling iMessage, powering off the phone, powering it back on again, and re-enabling it; editing the phone number in My Number (which didn’t seem to have any actual effect); doing a full network reset (Settings &amp;gt; General &amp;gt; Transfer or Reset Device &amp;gt; Reset &amp;gt; Reset Network Settings). Hopefully that’ll help you too.&lt;/p&gt;
&lt;p&gt;Finally, there was voicemail. Some years ago, I set up an account with &lt;a href="https://sipgate.com"&gt;Sipgate&lt;/a&gt;, where I get a phone number and voicemail. The thing I like about this is that when I get voicemail on that number, it emails me an mp3 of the voicemail. This is wholly brilliant, and phone companies don’t do it; I’m not interested in ringing some number and then pressing buttons to navigate the horrible menu, and “visual voicemail” never took off and never became an open standard thing anyway. So my sipgate thing is brilliant. But… how do I tell my phone to forward calls to my sipgate number if I don’t answer? I did this once, about 10 years ago, and I couldn’t remember how. A judicious bit of web searching later, and I have the answer.&lt;/p&gt;
&lt;p&gt;One uses a few Secret Network Codes to do this. It’s called “call diversion” or “call forwarding”, and you do it by typing a magic number into your phone dialler, as though you were ringing it as a number. So, let’s say your sipgate number is 0121 496 0000. Open up the phone dialler, and dial &lt;code&gt;*61*01214960000#&lt;/code&gt; and press dial. That magic code, &lt;code&gt;*61&lt;/code&gt;, sets your number to divert if you don’t answer it. Do it again with &lt;code&gt;*62&lt;/code&gt; to also divert calls when your phone is switched off. You can also do it again with &lt;code&gt;*67&lt;/code&gt; to divert calls when your phone is engaged, but I don’t do that; I want those to come through where the phone can let me switch calls.&lt;/p&gt;
&lt;p&gt;And that’s how I moved phone networks. Stuart, ten years from now when you read this again, now you know how to do it. You’re welcome.&lt;/p&gt;&lt;ol class="simple-footnotes"&gt;&lt;li id="sf-transferring-to-a-new-phone-network-2022-edition-1"&gt;Well, there is: you can spend twenty actual pounds to get unlimited data until the end of the month. But that’s loads of money. &lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-1-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-transferring-to-a-new-phone-network-2022-edition-2"&gt;is there an actual camel whose back was broken in some fable somewhere? this is a terribly unfortunate metaphor! &lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-2-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-transferring-to-a-new-phone-network-2022-edition-3"&gt;Coverage in my flat — for any network — is rubbish. So wifi calling is a hard requirement. I don’t know why this is — I’m in the city! Maybe the walls all have copper wiring in them like the room that Elodin was imprisoned in, I don’t know &lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-3-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-transferring-to-a-new-phone-network-2022-edition-4"&gt;I always buy my own phones, so I only ever need a &lt;span class="caps"&gt;SIM&lt;/span&gt;, and I don’t like being locked in &lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-4-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-transferring-to-a-new-phone-network-2022-edition-5"&gt;we, meaning &lt;a href="https://open-web-advocacy.org/"&gt;Open Web Advocacy&lt;/a&gt;, have worked extensively with the &lt;span class="caps"&gt;CMA&lt;/span&gt; (and other regulators around the world) about assisting and requiring mobile phone manufacturers to provide browser diversity — that is, to make it so you can use web apps on your phone that are as capable as platform-specific apps, and the &lt;span class="caps"&gt;CMA&lt;/span&gt; are great &lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-5-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-transferring-to-a-new-phone-network-2022-edition-6"&gt;removing a &lt;span class="caps"&gt;SIM&lt;/span&gt; tray is harder than it looks when you don’t wear earrings. I had to search &lt;em&gt;everywhere&lt;/em&gt; to find one of those little &lt;span class="caps"&gt;SIM&lt;/span&gt; tools &lt;a href="#sf-transferring-to-a-new-phone-network-2022-edition-6-back" class="simple-footnote-back"&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;</content><category term="General musings"></category></entry><entry><title>Don’t Read Off The Screen</title><link href="https://www.kryogenix.org/days/2022/10/18/don-t-read-off-the-screen/" rel="alternate"></link><published>2022-10-18T10:11:00+01:00</published><updated>2022-10-18T10:11:00+01:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2022-10-18:/days/2022/10/18/don-t-read-off-the-screen/</id><summary type="html">&lt;style&gt;
.yt-drots-container {
    position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%;
} 
.yt-drots-container iframe, .yt-drots-container object, .yt-drots-container embed {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
}
&lt;/style&gt;

&lt;p&gt;Hear this talk performed (with appropriate background&amp;nbsp;music):&lt;/p&gt;
&lt;div class="yt-drots-container"&gt;&lt;iframe src="https://www.youtube-nocookie.com/embed/VvmIhMKN584" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;&lt;/div&gt;

&lt;hr&gt;

&lt;p&gt;Friends and enemies, attendees of &lt;a href="https://conf.techmids.io"&gt;Tech Mids 2022&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Don&amp;#8217;t read off the&amp;nbsp;screen …&lt;/p&gt;</summary><content type="html">&lt;style&gt;
.yt-drots-container {
    position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%;
} 
.yt-drots-container iframe, .yt-drots-container object, .yt-drots-container embed {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
}
&lt;/style&gt;

&lt;p&gt;Hear this talk performed (with appropriate background&amp;nbsp;music):&lt;/p&gt;
&lt;div class="yt-drots-container"&gt;&lt;iframe src="https://www.youtube-nocookie.com/embed/VvmIhMKN584" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;&lt;/div&gt;

&lt;hr&gt;

&lt;p&gt;Friends and enemies, attendees of &lt;a href="https://conf.techmids.io"&gt;Tech Mids 2022&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Don&amp;#8217;t read off the&amp;nbsp;screen.&lt;/p&gt;
&lt;p&gt;If I could offer you only one piece of advice for why and how you should speak in public, don&amp;#8217;t read off the screen would be it. Reading your slides out is guaranteed to make your talk boring, whereas the rest of my advice has no basis in fact other than my own experience, and the million great people who gave me &lt;a href="https://twitter.com/sil/status/1575776932670709760"&gt;thoughts&lt;/a&gt; on&amp;nbsp;Twitter.&lt;/p&gt;
&lt;p&gt;I shall dispense this advice&amp;#8230;&amp;nbsp;now.&lt;/p&gt;
&lt;p&gt;Every meetup in every town is crying out for speakers, and your voice is valuable. Tell people your story. The way you see things is unique, just like everybody&amp;nbsp;else.&lt;/p&gt;
&lt;p&gt;Everybody gets nervous about speaking sometimes. Anybody claiming that they don&amp;#8217;t is either lying, or trying to sell you something. If you&amp;#8217;re nervous, consider that its a mark of wanting to do a good&amp;nbsp;job.&lt;/p&gt;
&lt;p&gt;Don&amp;#8217;t start by planning what you want to say. Plan what you want people to hear. Then work backwards from there to find out what to say to make that&amp;nbsp;happen.&lt;/p&gt;
&lt;p&gt;You can do this. The audience are on your&amp;nbsp;side.&lt;/p&gt;
&lt;p&gt;Find your own style. Take bits and pieces from others and make them something of your&amp;nbsp;own.&lt;/p&gt;
&lt;p&gt;Slow down. Breathe. You&amp;#8217;re going faster than it feels like you&amp;nbsp;are.&lt;/p&gt;
&lt;p&gt;Pee beforehand. If you have a trouser fly, check&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;If someone tells you why you should speak, take their words with a pinch of salt, me included. If they tell you how to speak, take two pinches. But small tips are born of someone else&amp;#8217;s bad experience. When they say to use a lapel mic, or drink water, or to have a backup, then listen; they had their bad day so that you didn&amp;#8217;t have&amp;nbsp;to.&lt;/p&gt;
&lt;p&gt;Don&amp;#8217;t put up with rambling opinions from questioners. If they have a comment rather than a question, then they should have applied to do a talk themselves. You were asked to be here. Be proud of&amp;nbsp;that.&lt;/p&gt;
&lt;p&gt;Practice. And then practice again, and again. If you think you&amp;#8217;ve rehearsed enough, you&amp;nbsp;haven&amp;#8217;t.&lt;/p&gt;
&lt;p&gt;Speak inclusively, so that none of your audience feels that the talk wasn&amp;#8217;t for&amp;nbsp;them.&lt;/p&gt;
&lt;p&gt;Making things look unrehearsed takes a lot of&amp;nbsp;rehearsal.&lt;/p&gt;
&lt;p&gt;Some people script their talks, some people don&amp;#8217;t. Whether you prefer bullet points or a soliloquy is up to you. Whichever you choose, remember: don&amp;#8217;t just read out your notes. Your talk is a performance, not a&amp;nbsp;recital.&lt;/p&gt;
&lt;p&gt;Nobody knows if you make a mistake. Carry on, and correct it when you can. But keep things simple. Someone drowning in information finds it hard to&amp;nbsp;listen.&lt;/p&gt;
&lt;p&gt;Live demos anger the gods of speaking. If you can avoid a live demo, do so. Record it in advance, or prep it so that it looks live. Nobody minds at&amp;nbsp;all.&lt;/p&gt;
&lt;p&gt;Don&amp;#8217;t do a talk only&amp;nbsp;once.&lt;/p&gt;
&lt;p&gt;Acting can be useful, if that&amp;#8217;s the style you like. Improv classes, stage presence, how you stand and what you do with your hands, all of this can be taught. But put your shoulders back and you&amp;#8217;ve got about half of&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;Carry your own &lt;span class="caps"&gt;HDMI&lt;/span&gt; adapter and have a backup copy of your talk. Your technology will betray you if it gets a&amp;nbsp;chance.&lt;/p&gt;
&lt;p&gt;Record your practices and watch yourself back. It can be a humbling experience, but you are your own best teacher, if you&amp;#8217;re willing to&amp;nbsp;listen.&lt;/p&gt;
&lt;p&gt;Try to have a star moment: something that people will remember about what you said and the way you said it. Whether that&amp;#8217;s a surprising truth or an excellent joke or a weird gimmick, your goal is to have people walk away remembering what you said. Help them to do&amp;nbsp;that.&lt;/p&gt;
&lt;p&gt;Now, go do talks. I&amp;#8217;m Stuart Langridge, and you aren&amp;#8217;t. So do your talk, your&amp;nbsp;way.&lt;/p&gt;
&lt;p&gt;But trust me: don&amp;#8217;t read off the&amp;nbsp;screen.&lt;/p&gt;</content><category term="General musings"></category></entry><entry><title>Farmbound, or how I built an app in 2022</title><link href="https://www.kryogenix.org/days/2022/08/31/farmbound-or-how-i-built-an-app-in-2022/" rel="alternate"></link><published>2022-08-31T12:56:00+01:00</published><updated>2022-08-31T12:56:00+01:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2022-08-31:/days/2022/08/31/farmbound-or-how-i-built-an-app-in-2022/</id><summary type="html">&lt;p&gt;So, I made a game. It&amp;#8217;s called &lt;a href="https://kryogenix.org/farmbound"&gt;Farmbound&lt;/a&gt;. It&amp;#8217;s a puzzle; you get a sequence of farm things &amp;#8212; seeds, crops, knives, water &amp;#8212; and they combine to make better items and to give you points. Knives next to crops and fields continually harvest them for points; seeds combine to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;So, I made a game. It&amp;#8217;s called &lt;a href="https://kryogenix.org/farmbound"&gt;Farmbound&lt;/a&gt;. It&amp;#8217;s a puzzle; you get a sequence of farm things &amp;#8212; seeds, crops, knives, water &amp;#8212; and they combine to make better items and to give you points. Knives next to crops and fields continually harvest them for points; seeds combine to make crops which combine to make fields; water and manure grow a seed into a crop and a crop into a field. Think of it like a cross between a match-3 game and Little Alchemy. The wrinkle is that the sequence of items you get is the same for the whole day: if you play again, you&amp;#8217;ll get the same things in the same order, so you can learn and refine your strategy. It&amp;#8217;s rather fun: &lt;a href="https://kryogenix.org/farmbound"&gt;give it a try&lt;/a&gt;.&lt;/p&gt;
&lt;figure&gt;
    &lt;figcaption&gt;Farmbound, on a mobile, in light mode&lt;/figcaption&gt;
    &lt;img src="https://kryogenix.org/random/farmbound-lightmode-mobile.png" alt=""&gt;
&lt;/figure&gt;

&lt;p&gt;It&amp;#8217;s a web app. Works for everyone. And I thought it would be useful to explain why it is, why I think that&amp;#8217;s the way to do things, and some of the interesting parts of building an app for everyone to play which is delivered over the web rather than via app stores and&amp;nbsp;downloads.&lt;/p&gt;
&lt;h3&gt;Why&amp;#8217;s it a web app and not a platform-specific native&amp;nbsp;app?&lt;/h3&gt;
&lt;p&gt;Well, there are a bunch of practical reasons. You get completely immediate play with a web app; someone taps on a share link, and they&amp;#8217;re playing. No installation, no platform detection, it Just Works (to coin a phrase which nobody has ever used before about apps ever in the history of technology). And for something like this, an app with platform-specific code isn&amp;#8217;t needed: sure, if you&amp;#8217;re talking to some hardware devices, or doing low-level device fiddling or operating system integration, you might need to build and deliver something separately to each platform. But Farmbound is not that. There is nothing that Farmbound needs that requires a native app (well, nearly nothing, and see later). So it isn&amp;#8217;t&amp;nbsp;one.&lt;/p&gt;
&lt;p&gt;There are some benefits for me as the developer, too. Such things are less important; the people playing are the important ones. But if I can make things nicer for myself without making them worse for players, then I&amp;#8217;m going to do it. Obviously there&amp;#8217;s only one codebase. (For platform-specific apps that can be alleviated a little with cross-platform frameworks, some of which are &lt;span class="caps"&gt;OK&lt;/span&gt; these days.) One still needs to test across platforms, though, so that&amp;#8217;s not a huge benefit. On the other hand, I don&amp;#8217;t have to pay extra to distribute it (beyond it being on my website, which I&amp;#8217;d be paying for anyway), and importantly I don&amp;#8217;t have to &lt;em&gt;keep&lt;/em&gt; paying in order to keep my game available for ever. There&amp;#8217;s no annual tithe required. There&amp;#8217;s no review process. I also get support for minority platforms by publishing on the web&amp;#8230; and I&amp;#8217;m not really talking about something in use by a half-dozen people here. I&amp;#8217;m talking about desktop computers. How many people building a native app, even a relatively simple puzzle game like this, make a build for iOS and Android &lt;em&gt;and&lt;/em&gt; Windows and Mac and Linux? Not many. The web gets me all that for minimal extra work, and if someone on FreeBSD or KaiOS wants to play, they can, as long as they&amp;#8217;ve got a modern browser. (People saying &amp;#8220;what about those without modern browsers&amp;#8221;&amp;#8230; see&amp;nbsp;below.)&lt;/p&gt;
&lt;p&gt;But from a less practical and more philosophical point of view&amp;#8230; I shouldn&amp;#8217;t &lt;em&gt;need&lt;/em&gt; to build a platform-specific native app to make a game like this. We want a world where anyone can build and publish an app without having to ask permission, right? I shouldn&amp;#8217;t need to go through a review process or be beholden to someone else deciding whether to publish my game. &lt;a href="https://scribe.rip/m/global-identity?redirectUrl=https%3A%2F%2Fjavascript.plainenglish.io%2Fi-replaced-my-native-ios-app-with-a-cross-platform-web-app-and-no-one-noticed-1653901ce244"&gt;The web works.&lt;/a&gt; Would Wordle have become so popular if you had to download a Windows app or wait for review before an update happened? I doubt it. I used to say that if you&amp;#8217;re building something complex like Photoshop then maybe go native, but in a world with Figma in it, that maybe doesn&amp;#8217;t apply any more, and so Adobe listened to that and now &lt;a href="https://helpx.adobe.com/uk/photoshop/using/photoshop-web-faq.html"&gt;Photoshop &lt;em&gt;is&lt;/em&gt; on the web&lt;/a&gt;. Give people a thing which doesn&amp;#8217;t need installation, gets them playing straight away, and works everywhere? Sounds good to me. Farmbound&amp;#8217;s a web&amp;nbsp;app.&lt;/p&gt;
&lt;h3&gt;Why&amp;#8217;s it not got its own domain, then, if it&amp;#8217;s on the&amp;nbsp;web?&lt;/h3&gt;
&lt;p&gt;Farmbound shouldn&amp;#8217;t need its own domain, I don&amp;#8217;t think. If people find out about it, it&amp;#8217;ll likely be by shared links showing off how someone else did, which means they click the link. If it&amp;#8217;s popular then it&amp;#8217;ll be top hit for its own name (if it isn&amp;#8217;t, the Google people need to have a serious talk with themselves), and if it isn&amp;#8217;t popular then it doesn&amp;#8217;t matter. And, like native app building, I don&amp;#8217;t really want to be on the hook forever for paying for a domain; sure, it&amp;#8217;s not much money, but it&amp;#8217;s still annoying that I&amp;#8217;m paying for a couple of ideas that I had a decade ago and which nobody cares about any more. I can&amp;#8217;t drop them, because of course &lt;a href="https://www.w3.org/Provider/Style/URI"&gt;cool URIs don&amp;#8217;t change&lt;/a&gt;, and I didn&amp;#8217;t want to be thinking a decade from now, do I still need to pay for&amp;nbsp;this?&lt;/p&gt;
&lt;p&gt;In slightly more ego-driven terms, it being on my website means I get the credit, too. Plus, I quite like seeing things that are part of an existing site. This is what drove the (admittedly hipster-ish) rise of &amp;#8220;tilde sites&amp;#8221; again a few years ago; a bit of nostalgia for a long time ago. Fortunately, I&amp;#8217;ve also got Cloudflare in front of my site, which alleviates worries I might have had about it dying under load, although check back with me again if that happens to see if it turns out to be true or not. (Also, I&amp;#8217;m &lt;a href="https://twitter.com/lizthegrey/status/1562974331021725696"&gt;considering alternatives to Cloudflare&lt;/a&gt; at the moment&amp;nbsp;too.)&lt;/p&gt;
&lt;h3&gt;So what was annoying and a problem when building an app on the&amp;nbsp;web?&lt;/h3&gt;
&lt;h4&gt;Architecture&lt;/h4&gt;
&lt;p&gt;Firstly, I separated the front and back ends and deployed them in different places. I&amp;#8217;m not all that confident that my hosted site can cope with being hammered, if I&amp;#8217;m honest. This is alleviated somewhat by cloud caching, and hopefully quite a bit more by having a service worker in place which caches almost everything (although see below about that), but a lot of this decision was driven by not wanting to incur a server hit for every visitor every time, as much as possible. This drove at least some of the architectural decisions. The front end is on my site and is plain &lt;span class="caps"&gt;HTML&lt;/span&gt;, &lt;span class="caps"&gt;CSS&lt;/span&gt;, and JavaScript. The back end is not touched when starting the game; it&amp;#8217;s only touched when you &lt;em&gt;finish&lt;/em&gt; a game, in order to submit your score and get back the best score that day to see if you beat that. That back end is written in Deno, and is hosted on &lt;a href="http://fly.io"&gt;fly.io&lt;/a&gt;, who seem pretty cool. (I did look at Deno Deploy, but they don&amp;#8217;t do permanent&amp;nbsp;storage.)&lt;/p&gt;
&lt;p&gt;Part of the reason the back end is a bit of extra work is that it verifies your submitted game to check you aren&amp;#8217;t cheating and lying about your score. This required me to completely reimplement the game code in Deno. Now, you may be saying &amp;#8220;what? the front end game code is in JavaScript and so is the back end? why don&amp;#8217;t they share a library?&amp;#8221; and the answer is, because I didn&amp;#8217;t think of it. So I wrote the front end first and didn&amp;#8217;t separate out the core game management from all the &amp;#8220;animate this stuff with &lt;span class="caps"&gt;CSS&lt;/span&gt;&amp;#8221; bits, because it was a fun weekend project done as a proof of concept. Once I got a bit further into it and realised that I &lt;em&gt;should&lt;/em&gt; have done that&amp;#8230; I didn&amp;#8217;t wanna, because that would have sucked all the fun out of the project like a vampire and meant that I&amp;#8217;d have never done it. So, take this as a lesson: think about whether you want a thing to be popular up front. Not that you&amp;#8217;ll listen to this advice, because I never do&amp;nbsp;either.&lt;/p&gt;
&lt;p&gt;Similarly, this means that there&amp;#8217;s less in the way of analytics, so I don&amp;#8217;t get information about users, or real-time monitoring of popularity. This is because I did not want to add Google Analytics or similar things. No personal data about you ever leaves your device. You&amp;#8217;ll have noticed that there&amp;#8217;s no awful pop-up cookie consent dialogue; this is because I don&amp;#8217;t need one, because I don&amp;#8217;t collect any analytics data about players at all! Guess what, people who find those dialogues annoying (i.e., everyone?) You can tell companies to &lt;em&gt;stop collecting data about you&lt;/em&gt; and then they won&amp;#8217;t need an annoying dialogue! And when they say no&amp;#8230; well, then you&amp;#8217;ll have learned something about how they view you as customers, perhaps. Similarly, when scores are submitted, there&amp;#8217;s no personal information that goes with them. I don&amp;#8217;t even know whether two scores were submitted by the same person; there&amp;#8217;s no unique &lt;span class="caps"&gt;ID&lt;/span&gt; per person or per device or anything. (Technically, the &lt;span class="caps"&gt;IP&lt;/span&gt; is submitted to the server, of course, but I don&amp;#8217;t record it or use it; you&amp;#8217;ll have to take my word for&amp;nbsp;that.)&lt;/p&gt;
&lt;p&gt;This architecture split also partially explains why the game&amp;#8217;s JavaScript-dependent. I know, right? Me, the bloke who wrote &amp;#8220;&lt;a href="https://kryogenix.org/code/browser/everyonehasjs.html"&gt;Everyone has JavaScript, right?&lt;/a&gt;&amp;#8220;, building a thing which requires &lt;span class="caps"&gt;JS&lt;/span&gt; to run? What am I doing? Well, honestly, I don&amp;#8217;t want to incur repeated server hits is the thing. For a real project, something which was critical, then I absolutely would do that; I have the server game simulation, and I could relatively easily have the server pass back a game state along with the &lt;span class="caps"&gt;HTML&lt;/span&gt; which was then submitted. The page is set up to work this way: the board is a &lt;code&gt;&amp;lt;form&amp;gt;&lt;/code&gt;, the things you click on are &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt;s, and so on. But I&amp;#8217;m frightened of it getting really popular and then me getting a large bill for cloud hosting. In this particular situation and this particular project, I&amp;#8217;d rather the thing die than do that. That&amp;#8217;s not how I&amp;#8217;d build something more critical, but&amp;#8230; Farmbound&amp;#8217;s a puzzle game. I&amp;#8217;m &lt;span class="caps"&gt;OK&lt;/span&gt; with it not working, and if I turn out to be wrong about that, I can change that implementation relatively quickly without it being a big problem. It&amp;#8217;s not &lt;em&gt;architected&lt;/em&gt; in a &lt;span class="caps"&gt;JS&lt;/span&gt;-dependent way; it&amp;#8217;s just progressively enhanced that&amp;nbsp;way.&lt;/p&gt;
&lt;h4&gt;iOS&amp;nbsp;browser&lt;/h4&gt;
&lt;p&gt;I had a certain amount of hassle from iOS Safari. Some of this is pretty common &amp;#8212; how do I stop a double-tap zooming in? How do I stop the page overscrolling? &amp;#8212; but most of the &amp;#8220;fixes&amp;#8221; are a combination of experimentation, cargo culting ideas off Stack Overflow, and something akin to wishing on a star. That&amp;#8217;s all pretty irritating, although Safari is hardly alone in this. But there is a separate thing which is iOS Safari specific, which is this: I can&amp;#8217;t sensibly present an &amp;#8220;add this to your home screen&amp;#8221; hint in iOS browsers other than Safari itself. In iOS Safari, I can show a little hint to help people know that they can add Farmbound to their home screen (which of course is delayed until a second game is begun and then goes away for a month if you dismiss it, because hassling your own players is a foolish thing to do). But in &lt;em&gt;non&lt;/em&gt; Safari iOS browsers (which, lest we forget, are still Safari under the covers; see &lt;a href="https://open-web-advocacy.org/"&gt;Open Web Advocacy&lt;/a&gt; if this is a surprise to you or if you don&amp;#8217;t like it), I can&amp;#8217;t sensibly present that hint. Because those non-Safari iOS browsers aren&amp;#8217;t allowed to add web apps to your home screen at all. I can&amp;#8217;t even give people a convenient tap to open Farmbound &lt;em&gt;in&lt;/em&gt; iOS Safari where they &lt;em&gt;can&lt;/em&gt; add the app to their home screen, because there&amp;#8217;s no way of doing that. So, apologies, Chrome iOS or Firefox iOS users and others: you&amp;#8217;ll have to open Farmbound in Safari itself if you want an easy way to come back every day. At least for&amp;nbsp;now.&lt;/p&gt;
&lt;h4&gt;Service&amp;nbsp;workers&lt;/h4&gt;
&lt;p&gt;And finally, and honestly most annoyingly, the service&amp;nbsp;worker.&lt;/p&gt;
&lt;p&gt;Building and debugging and testing a service worker is still &lt;em&gt;so hard&lt;/em&gt;. Working out why this page is cached, or why it isn&amp;#8217;t cached, or why it isn&amp;#8217;t loading, is incredibly baffling and infuriating still, and I just don&amp;#8217;t get it. I tried using &amp;#8220;workbox&amp;#8221;, but that doesn&amp;#8217;t actually explain how to use it properly. In particular, for this use case, a completely static unchanging site, what I want is &amp;#8220;cache this actual page and all its dependencies forever, unless there&amp;#8217;s a change&amp;#8221;. However, all the docs assume that I&amp;#8217;m building an &amp;#8220;app shell&amp;#8221; which then uses &lt;code&gt;fetch()&lt;/code&gt; to get data off the server repeatedly, and so won&amp;#8217;t shut up about &amp;#8220;network first&amp;#8221; and &amp;#8220;cache first, falling back&amp;#8221; and so on rather than the &amp;#8220;just cache it all because it&amp;#8217;s static, and then shut up&amp;#8221; methodology. And getting insight into why a thing loaded or didn&amp;#8217;t is really hard! Sure, also having Cloudflare caching stuff and my browser caching stuff as well really doesn&amp;#8217;t help here. But I am not even slightly convinced that I&amp;#8217;ve done all this correctly, and I don&amp;#8217;t really know how to be better. It&amp;#8217;s too hard,&amp;nbsp;still.&lt;/p&gt;
&lt;h3&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;So that&amp;#8217;s why Farmbound is the way it is. It&amp;#8217;s been interesting to create, and I am very grateful to the Elite Farmbound Testing Team for a great deal of feedback and helping me refine the idea and the play: lots of love to &lt;a href="https://popey.com"&gt;popey&lt;/a&gt;, &lt;a href="https://twitter.com/ralight"&gt;Roger&lt;/a&gt;, &lt;a href="https://twitter.com/simonjbutcher"&gt;Simon&lt;/a&gt;, &lt;a href="https://wimpysworld.com"&gt;Martin&lt;/a&gt;, and &lt;a href="https://barrenfrozenwasteland.com/"&gt;Mark&lt;/a&gt;, as well as Handy Matt and my&amp;nbsp;mum!&lt;/p&gt;
&lt;p&gt;There are still some things I might do in the future (achievements? maybe), and I might change the design (I&amp;#8217;m not great at visual design, as you can tell), and I really wish that I could have done all the animations with Shared Element Transitions because it would have been 312 times easier than the way I did it (a bunch of them add generated content and then web-animations-api move the ::before around, which I thought was quite neat but is also daft by comparison with &lt;span class="caps"&gt;SET&lt;/span&gt;). But I&amp;#8217;m pleased with the implementation, and most importantly it&amp;#8217;s actually fun to play. Getting over a thousand points is really good (although sometimes impossible, on some days), and I don&amp;#8217;t really think the best strategies have been worked out yet. Is it better to make fields and tractors, or not go that far? Is water a boon or an annoyance? I&amp;#8217;d be interested in your thoughts. Go play &lt;a href="https://kryogenix.org/farmbound/"&gt;Farmbound&lt;/a&gt;, and share your results with &lt;a href="https://twitter.com/sil"&gt;me on Twitter&lt;/a&gt;!&lt;/p&gt;</content><category term="General musings"></category></entry><entry><title>Help the CMA help the Web</title><link href="https://www.kryogenix.org/days/2022/06/17/help-the-cma-help-the-web/" rel="alternate"></link><published>2022-06-17T11:33:00+01:00</published><updated>2022-06-17T11:33:00+01:00</updated><author><name>sil</name></author><id>tag:www.kryogenix.org,2022-06-17:/days/2022/06/17/help-the-cma-help-the-web/</id><summary type="html">&lt;p&gt;As has been &lt;a href="https://www.kryogenix.org/days/2021/09/06/talking-to-the-competition-and-markets-authority-about-apple/"&gt;mentioned here before&lt;/a&gt; the &lt;span class="caps"&gt;UK&lt;/span&gt; regulator, the &lt;a href="https://www.gov.uk/government/organisations/competition-and-markets-authority"&gt;Competition and Markets Authority&lt;/a&gt;, are conducting an investigation into mobile phone software ecosystems, and they recently published the results of that investigation in the &lt;a href="https://www.gov.uk/cma-cases/mobile-ecosystems-market-study"&gt;mobile ecosystems market study&lt;/a&gt;. They&amp;#8217;re also focusing in on two particular areas of concern: competition …&lt;/p&gt;</summary><content type="html">&lt;p&gt;As has been &lt;a href="https://www.kryogenix.org/days/2021/09/06/talking-to-the-competition-and-markets-authority-about-apple/"&gt;mentioned here before&lt;/a&gt; the &lt;span class="caps"&gt;UK&lt;/span&gt; regulator, the &lt;a href="https://www.gov.uk/government/organisations/competition-and-markets-authority"&gt;Competition and Markets Authority&lt;/a&gt;, are conducting an investigation into mobile phone software ecosystems, and they recently published the results of that investigation in the &lt;a href="https://www.gov.uk/cma-cases/mobile-ecosystems-market-study"&gt;mobile ecosystems market study&lt;/a&gt;. They&amp;#8217;re also focusing in on two particular areas of concern: competition among mobile browsers, and in cloud gaming services. This is from their &lt;a href="https://www.gov.uk/cma-cases/mobile-browsers-and-cloud-gaming"&gt;consultation document&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
Mobile browsers are a key gateway for users and online content providers to access and distribute content and services over the internet.

Both Apple and Google have very high shares of supply in mobile browsers, and their positions in mobile browser engines are even stronger. Our market study found the competitive constraints faced by Apple and Google from other mobile browsers and browser engines, as well as from desktop browsers and native apps, to be weak, and that there are significant barriers to competition.

One of the key barriers to competition in mobile browser engines appears to be Apple’s requirement that other browsers on its iOS operating system use Apple’s WebKit browser engine. In addition, web compatibility limits browser engine competition on devices that use the Android operating system (where Google allows browser engine choice). These barriers also constitute a barrier to competition in mobile browsers, as they limit the extent of differentiation between browsers (given the importance of browser engines to browser functionality).
&lt;/blockquote&gt;

&lt;p&gt;They go on to suggest things they could potentially do about&amp;nbsp;it:&lt;/p&gt;
&lt;blockquote&gt;
A non-exhaustive list of potential remedies that a market investigation could consider includes:

&lt;ul&gt;
    &lt;li&gt;removing Apple’s restrictions on competing browser engines on iOS&amp;nbsp;devices;&lt;/li&gt;
    &lt;li&gt;mandating access to certain functionality for browsers (including supporting web&amp;nbsp;apps);&lt;/li&gt;
    &lt;li&gt;requiring Apple and Google to provide equal access to functionality through APIs for rival&amp;nbsp;browsers;&lt;/li&gt;
    &lt;li&gt;requirements that make it more straightforward for users to change the default browser within their device&amp;nbsp;settings;&lt;/li&gt;
    &lt;li&gt;choice screens to overcome the distortive effects of pre-installation;&amp;nbsp;and&lt;/li&gt;
    &lt;li&gt;requiring Apple to remove its App Store restrictions on cloud gaming&amp;nbsp;services.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;But, importantly, they want to know what &lt;em&gt;you&lt;/em&gt; think. I&amp;#8217;ve now been part of direct and detailed discussions with the &lt;span class="caps"&gt;CMA&lt;/span&gt; a couple of times as part of &lt;a href="https://open-web-advocacy.org/"&gt;&lt;span class="caps"&gt;OWA&lt;/span&gt;&lt;/a&gt;, and I&amp;#8217;m pretty impressed with them as a group; they&amp;#8217;re engaged and interested in the issues here, and knowledgeable. We&amp;#8217;re not having to educate them in what the web is. The &lt;span class="caps"&gt;UK&lt;/span&gt;&amp;#8217;s potential digital future is not all good (and &lt;a href="https://webdevlaw.uk/2022/06/17/data-reform-bill-cookie-popups/"&gt;some of the &lt;span class="caps"&gt;UK&lt;/span&gt;&amp;#8217;s digital future looks like it could be rather bad indeed&lt;/a&gt;!) but the &lt;span class="caps"&gt;CMA&lt;/span&gt;&amp;#8217;s work is a bright spot, and it&amp;#8217;s important that we support the smart people in tech government, lest we get the other&amp;nbsp;sort.&lt;/p&gt;
&lt;p&gt;So, please, take a little time to write down what you think about all this. The &lt;span class="caps"&gt;CMA&lt;/span&gt; are governmental: they have plenty of access to windy bloviations about the philosophy of tech, or speculation about what might happen from &amp;#8220;influencers&amp;#8221;. What&amp;#8217;s important, what they need, is real comments from real people actually affected by all this stuff in some way, either positively or negatively. Tell they whether you think they&amp;#8217;ve got it right or wrong; what you think the remedies should be; which problems you&amp;#8217;ve run into and how they affected your projects or your business. Earlier in this process we put out calls for people to send in their thoughts and many of you responded, and that was really helpful! We can do more this time, when it&amp;#8217;s about browsers and the Web directly, I&amp;nbsp;hope. &lt;/p&gt;
&lt;p&gt;If you feel as I do then you may find &lt;a href="https://assets.publishing.service.gov.uk/media/622a2ee3e90e070ed1cf09b0/Open_Web_Advocacy_-_responses.pdf"&gt;&lt;span class="caps"&gt;OWA&lt;/span&gt;&amp;#8217;s response to the &lt;span class="caps"&gt;CMA&lt;/span&gt;&amp;#8217;s interim report&lt;/a&gt; to be useful reading, and also the &lt;a href="https://twitter.com/OpenWebAdvocacy/status/1537676458478702594"&gt;whole &lt;span class="caps"&gt;OWA&lt;/span&gt; twitter thread on this&lt;/a&gt;, but the most important thing is that you send in your thoughts in your own words. Maybe what you think is that everything is great as it is! It&amp;#8217;s still worth speaking up. It is only a good thing if the &lt;span class="caps"&gt;CMA&lt;/span&gt; have more views from actual people on this, regardless of what those views are. These actions that the &lt;span class="caps"&gt;CMA&lt;/span&gt; could take here could make a big difference to how competition on the Web proceeds, and I imagine everyone who builds for the web has thoughts on what they want to happen there. Also there will be thoughts on what the web should be from quite a few people who use the web, which is to say: everybody. And everybody should put their thoughts&amp;nbsp;in.&lt;/p&gt;
&lt;p&gt;So here&amp;#8217;s the quick&amp;nbsp;guide:&lt;/p&gt;
&lt;ol&gt;
    &lt;li&gt;You only have until July&amp;nbsp;22nd&lt;/li&gt;
    &lt;li&gt;Read [Mobile browsers and cloud gaming](https://www.gov.uk/cma-cases/mobile-browsers-and-cloud-gaming) from the &lt;span class="caps"&gt;CMA&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;Decide for yourself:
        &lt;ul&gt;
            &lt;li&gt;How these issues have personally affected you or your&amp;nbsp;business&lt;/li&gt;
            &lt;li&gt;How you think changes could affect the industry and&amp;nbsp;consumers&lt;/li&gt;
            &lt;li&gt;What interventions you think are&amp;nbsp;necessary&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;Email your response to&amp;nbsp;browsersandcloud@cma.gov.uk&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Go to it. You have a month. It&amp;#8217;s a nice sunny day in the &lt;span class="caps"&gt;UK&lt;/span&gt;&amp;#8230; why not read the report over lunchtime and then have a&amp;nbsp;think?&lt;/p&gt;</content><category term="General musings"></category></entry></feed>